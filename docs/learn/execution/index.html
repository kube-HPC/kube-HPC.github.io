<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><title>Execution | Hkube</title><meta name="viewport" content="width=640"/><meta property="og:title" content="Hkube: HPC over kubernetes."/><meta property="og:description" content="Hkube - HPC over kubernetes."/><meta property="og:type" content="website"/><meta property="og:url" content="http://hkube.io/"/><meta property="og:image" content="/img/og_image.png"/><meta property="og:image:type" content="image/png"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@hkube"/><meta name="twitter:title" content="Hkube: HPC over kubernetes"/><meta name="twitter:description" content="Hkube HPC over kubernetes"/><meta name="twitter:image" content="/img/twitter_image.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="home" type="application/rss+xml" href="/blog/rss.xml" title="Hkube Team Blog"/><link rel="stylesheet" href="/style.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rubik:300|Roboto:300"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,400i,600"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/></head><body><header><section><a class="nav-home" href="/"><img class="nav-logo" src="/img/logo.png" width="30" height="30"/>Hkube</a><nav><a href="/start/">Get Started</a><a href="/tutorial/">Tutorial</a><a href="/learn/">Learn</a><a href="/algorithms/">Algorithms</a></nav><div class="algolia-search-wrapper"><input type="text" id="algolia-search-input" placeholder="Search docs..."/></div></section></header><section><div class="documentationContent"><div class="inner-content"><h1>Execution</h1><div><p>Beside these data types, there are special signs that designed to define the pipeline execution flow.</p><ul><li>(@)  - <a href="#reference">Reference</a></li><li>(#)  - <a href="#batch">Batch</a></li><li>(#@) - <a href="#batch-reference">Batch Reference</a></li><li>(*@) - <a href="#wait-any">Wait Any</a></li></ul><h3><a class="anchor" name="flow-input"></a>Flow Input <a class="hash-link" href="#flow-input">#</a></h3><p>You can define reusable data for nodes input, this input is an object that called <strong>flowInput</strong>.<br/>Using the @ sign we can easily refer to this object.</p><pre class="prism language-js"><span class="string">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example-flowInput&quot;</span><span class="punctuation">,</span>
<span class="string">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example-node&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">42</span><span class="punctuation">,</span> <span class="keyword">true</span><span class="punctuation">,</span> <span class="string">&quot;@flowInput.files.links&quot;</span><span class="punctuation">,</span> <span class="keyword">null</span><span class="punctuation">,</span> <span class="punctuation">{</span>foo<span class="punctuation">:</span> <span class="string">&quot;bar&quot;</span><span class="punctuation">}</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span><span class="punctuation">,</span>
<span class="string">&quot;flowInput&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
    <span class="string">&quot;files&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
        <span class="string">&quot;links&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>
            <span class="string">&quot;links-1&quot;</span><span class="punctuation">,</span>
            <span class="string">&quot;links-2&quot;</span><span class="punctuation">,</span>
            <span class="string">&quot;links-3&quot;</span>
        <span class="punctuation">]</span><span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>Now the example algorithm will run with this input:</p><pre class="prism language-js">example<span class="operator">-</span>alg<span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">42</span><span class="punctuation">,</span> <span class="keyword">true</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="string">&quot;links-1&quot;</span><span class="punctuation">,</span><span class="string">&quot;links-2&quot;</span><span class="punctuation">,</span><span class="string">&quot;links-3&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="keyword">null</span><span class="punctuation">,</span> <span class="punctuation">{</span>foo<span class="punctuation">:</span> <span class="string">&quot;bar&quot;</span><span class="punctuation">}</span><span class="punctuation">]</span></pre><p>Or batch</p><pre class="prism language-js"><span class="string">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example-flowInput-batch&quot;</span><span class="punctuation">,</span>
<span class="string">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">42</span><span class="punctuation">,</span> <span class="keyword">false</span><span class="punctuation">,</span> <span class="keyword">true</span><span class="punctuation">,</span> <span class="string">&quot;#@flowInput.files.links&quot;</span><span class="punctuation">,</span> <span class="keyword">null</span><span class="punctuation">,</span> <span class="punctuation">{</span>foo<span class="punctuation">:</span> <span class="string">&quot;bar&quot;</span><span class="punctuation">}</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span><span class="punctuation">,</span>
<span class="string">&quot;flowInput&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
    <span class="string">&quot;files&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
        <span class="string">&quot;links&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>
            <span class="string">&quot;links-1&quot;</span><span class="punctuation">,</span>
            <span class="string">&quot;links-2&quot;</span><span class="punctuation">,</span>
            <span class="string">&quot;links-3&quot;</span>
        <span class="punctuation">]</span><span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>And the algorithm will run three times with this input:</p><pre class="prism language-js">example<span class="operator">-</span>alg <span class="number">1</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">42</span><span class="punctuation">,</span> <span class="keyword">true</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="string">&quot;links-1&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="keyword">null</span><span class="punctuation">,</span> <span class="punctuation">{</span>foo<span class="punctuation">:</span> <span class="string">&quot;bar&quot;</span><span class="punctuation">}</span><span class="punctuation">]</span>
example<span class="operator">-</span>alg <span class="number">2</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">42</span><span class="punctuation">,</span> <span class="keyword">true</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="string">&quot;links-2&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="keyword">null</span><span class="punctuation">,</span> <span class="punctuation">{</span>foo<span class="punctuation">:</span> <span class="string">&quot;bar&quot;</span><span class="punctuation">}</span><span class="punctuation">]</span>
example<span class="operator">-</span>alg <span class="number">3</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">42</span><span class="punctuation">,</span> <span class="keyword">true</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="string">&quot;links-3&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="keyword">null</span><span class="punctuation">,</span> <span class="punctuation">{</span>foo<span class="punctuation">:</span> <span class="string">&quot;bar&quot;</span><span class="punctuation">}</span><span class="punctuation">]</span></pre><h3><a class="anchor" name="reference"></a>Reference <a class="hash-link" href="#reference">#</a></h3><p>As we can see in the A -&gt; B -&gt; C pipeline example, by using @ in the input<br/>we can take node output and make it the input of another node.</p><pre class="prism language-js"><span class="string">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;reference&quot;</span><span class="punctuation">,</span>
<span class="string">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">false</span><span class="punctuation">,</span> <span class="string">&quot;OK&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">true</span><span class="punctuation">,</span> <span class="string">&quot;@green&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@yellow&quot;</span><span class="punctuation">,</span> <span class="number">512</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span></pre><p>The DAG of this pipeline will look like:<br/><img src="/img/docs/simple-pipeline.png" alt="Diagram"/></p><p>The blue circle is the <strong>pipeline driver</strong> which responsible for executing nodes with the right order and the right input.  Each result from any node is always return to the pipeline driver which decide what to do next.  </p><p><strong>Green node</strong> will run first because it does not depend on any other node.<br/>Green node input will be: [false, &quot;OK&quot;].  </p><p><strong>Yellow node</strong> depends on green node, see the &quot;@green&quot; in the input of the yellow node.<br/>So the input of the yellow node will be: [true, <strong>green node output</strong>].<br/>The last node to run will be the red node because it depend on the completion of<br/>the yellow node. The input of the red node will be: [<strong>yellow node output</strong>, 512].  </p><p>The final results of this pipeline will be the output of the red node.<br/>That because the red node is the last node in the pipeline.</p><h3><a class="anchor" name="batch"></a>Batch <a class="hash-link" href="#batch">#</a></h3><p>By using # in the input we can execute nodes in parallel and reduce the results into single node.<br/>This example is exactly like the first one, except the # sign in the input of the green node.</p><pre class="prism language-js"><span class="string">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;batch&quot;</span><span class="punctuation">,</span>
<span class="string">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">false</span><span class="punctuation">,</span> <span class="string">&quot;#[1,2,3]&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">true</span><span class="punctuation">,</span> <span class="string">&quot;@green&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@yellow&quot;</span><span class="punctuation">,</span> <span class="number">512</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span></pre><p>The DAG of this pipeline will look like:<br/><img src="/img/docs/simple-batch.png" alt="Diagram"/></p><p>The green node will run as a batch because of the # sign in the input.<br/>This pipeline will create three different tasks from type green-alg.<br/>each with a different input:  </p><pre class="prism language-js">green<span class="operator">-</span>alg <span class="number">1</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">false</span><span class="punctuation">,</span> <span class="string">&quot;1&quot;</span><span class="punctuation">]</span>
green<span class="operator">-</span>alg <span class="number">2</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">false</span><span class="punctuation">,</span> <span class="string">&quot;2&quot;</span><span class="punctuation">]</span>
green<span class="operator">-</span>alg <span class="number">3</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">false</span><span class="punctuation">,</span> <span class="string">&quot;3&quot;</span><span class="punctuation">]</span></pre><p>The yellow node will wait until all tasks of the green node will finish.<br/>The input of the yellow node will be: [true, green node output].<br/>The input of the red node will be: [yellow node output, 512].</p><h2><a class="anchor" name="batch-tolerance"></a>Batch Tolerance <a class="hash-link" href="#batch-tolerance">#</a></h2><p>The Batch Tolerance is a threshold setting that allow to control in which <strong>percent</strong> from the batch processing the entire pipeline should be fail.<br/>In this example we define batch tolerance of 60%, which means that we allow max of 60% from the batch items to be fail. </p><pre class="prism language-js"><span class="string">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example-batchTolerance&quot;</span><span class="punctuation">,</span>
<span class="string">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;#[1,2,3,4,5]&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@green&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span><span class="punctuation">,</span>
<span class="string">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
    <span class="string">&quot;batchTolerance&quot;</span><span class="punctuation">:</span> <span class="number">60</span>
<span class="punctuation">}</span></pre><p>Assuming that <strong>Node green</strong> will run and these are the batch items results. </p><pre class="prism language-js">green<span class="operator">-</span>alg <span class="number">1</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">false</span><span class="punctuation">,</span> <span class="string">&quot;1&quot;</span><span class="punctuation">]</span> <span class="operator">-</span><span class="operator">&gt;</span> success
green<span class="operator">-</span>alg <span class="number">2</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">false</span><span class="punctuation">,</span> <span class="string">&quot;2&quot;</span><span class="punctuation">]</span> <span class="operator">-</span><span class="operator">&gt;</span> failed
green<span class="operator">-</span>alg <span class="number">3</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">false</span><span class="punctuation">,</span> <span class="string">&quot;3&quot;</span><span class="punctuation">]</span> <span class="operator">-</span><span class="operator">&gt;</span> failed
green<span class="operator">-</span>alg <span class="number">4</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">false</span><span class="punctuation">,</span> <span class="string">&quot;4&quot;</span><span class="punctuation">]</span> <span class="operator">-</span><span class="operator">&gt;</span> failed
green<span class="operator">-</span>alg <span class="number">5</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">false</span><span class="punctuation">,</span> <span class="string">&quot;5&quot;</span><span class="punctuation">]</span> <span class="operator">-</span><span class="operator">&gt;</span> success</pre><p>Now the entire pipeline will fail because 3/5 from green node batch items has failed.<br/><strong>Node yellow</strong> will not run in this case.</p><h3><a class="anchor" name="batch-reference"></a>Batch Reference <a class="hash-link" href="#batch-reference">#</a></h3><p>By using #@ in the input we can create a batch processing on node results.<br/>Lets say that green node returns an array: [&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;].</p><pre class="prism language-js"><span class="string">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;batch-reference&quot;</span><span class="punctuation">,</span>
<span class="string">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">false</span><span class="punctuation">,</span> <span class="string">&quot;OK&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">false</span><span class="punctuation">,</span> <span class="string">&quot;#@green&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@yellow&quot;</span><span class="punctuation">,</span> <span class="number">512</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span></pre><p><strong>Node yellow</strong> will run three times, each with a different input.</p><pre class="prism language-js">yellow<span class="operator">-</span>alg <span class="number">1</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">false</span><span class="punctuation">,</span> <span class="string">&quot;A&quot;</span><span class="punctuation">]</span>
yellow<span class="operator">-</span>alg <span class="number">2</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">false</span><span class="punctuation">,</span> <span class="string">&quot;B&quot;</span><span class="punctuation">]</span>
yellow<span class="operator">-</span>alg <span class="number">3</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">false</span><span class="punctuation">,</span> <span class="string">&quot;C&quot;</span><span class="punctuation">]</span></pre><p>The DAG of this pipeline will look like:<br/><img src="/img/docs/batch-result.png" alt="Diagram"/></p><h3><a class="anchor" name="wait-any"></a>Wait Any <a class="hash-link" href="#wait-any">#</a></h3><p>By using *@ in the input we can create a wait any on batch.</p><pre class="prism language-js"><span class="string">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wait-any&quot;</span><span class="punctuation">,</span>
<span class="string">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">10</span><span class="punctuation">,</span> <span class="string">&quot;#[1,2,3]&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">true</span><span class="punctuation">,</span> <span class="string">&quot;*@green&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@yellow&quot;</span><span class="punctuation">,</span> <span class="number">512</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span></pre><p>The green node is defined to run as batch &quot;#[1,2,3]&quot;.</p><pre class="prism language-js">green<span class="operator">-</span>alg <span class="number">1</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">10</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">]</span> <span class="operator">-</span><span class="operator">&gt;</span> <span class="number">11</span>
green<span class="operator">-</span>alg <span class="number">2</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">10</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">]</span> <span class="operator">-</span><span class="operator">&gt;</span> <span class="number">12</span>
green<span class="operator">-</span>alg <span class="number">3</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">10</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">]</span> <span class="operator">-</span><span class="operator">&gt;</span> <span class="number">13</span></pre><p>The first argument is 10 and the second is one number from the batch array.<br/>For each run it&#x27;s return the sum of these two numbers.</p><p>Now what if we don&#x27;t want that <strong>Node yellow</strong> will wait until all the batch processing is done?<br/>We can define in the node input to wait for any result of green, like this: &quot;<em>@green&quot;.<br/>This way <strong>Node yellow</strong> will run three times, each with different input from <em>*Node green</em></em> output.</p><pre class="prism language-js">yellow<span class="operator">-</span>alg <span class="number">1</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">true</span><span class="punctuation">,</span> <span class="number">11</span><span class="punctuation">]</span>
yellow<span class="operator">-</span>alg <span class="number">2</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">true</span><span class="punctuation">,</span> <span class="number">12</span><span class="punctuation">]</span>
yellow<span class="operator">-</span>alg <span class="number">3</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="keyword">true</span><span class="punctuation">,</span> <span class="number">13</span><span class="punctuation">]</span></pre><p>The DAG of this pipeline will look like:<br/><img src="/img/docs/wait-any.png" alt="Diagram"/>  </p><h3><a class="anchor" name="another-batch-example"></a>Another Batch Example <a class="hash-link" href="#another-batch-example">#</a></h3><pre class="prism language-js"><span class="string">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;batch&quot;</span><span class="punctuation">,</span>
<span class="string">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;#[1,2,3]&quot;</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;#@green&quot;</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;#@yellow&quot;</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span></pre><p>The DAG of this pipeline will look like:<br/><img src="/img/docs/batch-result2.png" alt="Diagram"/> </p><h3><a class="anchor" name="another-wait-any-example"></a>Another Wait Any Example <a class="hash-link" href="#another-wait-any-example">#</a></h3><p>What if we want to run multiple batches, and for each batch item result<br/>We want to run node that will accept results with same order they have been created.</p><pre class="prism language-js"><span class="string">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wait-any&quot;</span><span class="punctuation">,</span>
<span class="string">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;#[1,2,3]&quot;</span><span class="punctuation">,</span> <span class="string">&quot;OK&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;#[1,2,3]&quot;</span><span class="punctuation">,</span> <span class="string">&quot;OK&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="string">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red-alg&quot;</span><span class="punctuation">,</span>
    <span class="string">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;*@green&quot;</span><span class="punctuation">,</span> <span class="string">&quot;*@yellow&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span></pre><p>In this example the <strong>Node red</strong> will run with the correct tuples.
This is default behavior of the system.</p><pre class="prism language-js">red<span class="operator">-</span>alg <span class="number">1</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">]</span>
red<span class="operator">-</span>alg <span class="number">2</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">]</span>
red<span class="operator">-</span>alg <span class="number">3</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">]</span></pre><p>The DAG of this pipeline will look like:<br/><img src="/img/docs/double-wait-any.png" alt="Diagram"/> </p></div><a class="read-next" href="/learn/webhooks"><span class="read-next-continue">Continue Reading →</span><span class="read-next-title">Webhooks</span></a></div><div class="nav-docs"><div><h3>Learn</h3><ul><li><a style="margin-left:0;" class="active" href="/learn/">Introduction</a></li><li><a style="margin-left:0;" class="active" href="/learn/pipeline/">Pipeline</a></li><li><a style="margin-left:0;" class="active" href="/learn/nodes/">Nodes</a><ul><li><a href="/learn/nodes/#entry-nodes">Entry Nodes</a></li><li><a href="/learn/nodes/#final-nodes"> Final Nodes</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/input/">Input</a><ul><li><a href="/learn/input/#input-types">Input Types</a></li><li><a href="/learn/input/#input-order"> Input Order</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/execution/">Execution</a><ul><li><a href="/learn/execution/#flow-input">Flow Input</a></li><li><a href="/learn/execution/#reference">Reference</a></li><li><a href="/learn/execution/#batch">Batch</a></li><li><a href="/learn/execution/#batch-reference">Batch Reference</a></li><li><a href="/learn/execution/#wait-any">Wait Any</a></li><li><a href="/learn/execution/#another-batch-example">Another Batch Example</a></li><li><a href="/learn/execution/#another-wait-any-example"> Another Wait Any Example</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/webhooks/">Webhooks</a><ul><li><a href="/learn/webhooks/#progress">Progress</a></li><li><a href="/learn/webhooks/#verbosity-level"> Verbosity Level</a></li><li><a href="/learn/webhooks/#result">Result</a></li></ul></li></ul></div></div></div></section><footer><section class="sitemap"><a href="/" class="nav-home"></a><div><h5><a href="/learn/">Learn</a></h5><a href="/learn/">Introduction</a><a href="/learn/pipeline/">Pipeline</a><a href="/learn/nodes/">Nodes</a><a href="/learn/input/">Input</a><a href="/learn/execution/">Execution</a><a href="/learn/webhooks/">Webhooks</a></div></section><section class="copyright">Copyright ©<span><script>document.write(new Date().getFullYear())</script> </span><noscript>2018</noscript>Hkube. MIT</section></footer><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
        docsearch({
          apiKey: '1f200a3c89d24e8bae4ab2934c78f67c',
          indexName: 'hkube',
          inputSelector: '#algolia-search-input'
        });
      </script><script>

      </script></body></html>