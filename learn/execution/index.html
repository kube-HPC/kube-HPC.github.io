<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><title>Pipeline Execution | Hkube</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta property="og:title" content="Hkube: HPC over Kubernetes."/><meta property="og:description" content="Hkube - HPC over Kubernetes, cloud native open source framework to run distributed pipeline of algorithms"/><meta property="og:type" content="website"/><meta property="og:url" content="http://hkube.org/"/><meta property="og:image" content="/img/home/og_image.png"/><meta property="og:image:type" content="image/png"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@hkube"/><meta name="twitter:title" content="Hkube: HPC over Kubernetes"/><meta name="twitter:description" content="Hkube HPC over Kubernetes"/><meta name="twitter:image" content="/img/home/twitter_image.png"/><link rel="shortcut icon" href="/img/home/favicon.png"/><link rel="home" type="application/rss+xml" href="/blog/rss.xml" title="Hkube Team Blog"/><link rel="stylesheet" href="/style.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rubik:300|Roboto:300"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,400i,600"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/></head><body><header class="nav-header "><section class="nav-section"><input type="checkbox" id="toggle-menu-checkbox" checked=""/><label id="toggle-menu" for="toggle-menu-checkbox" class=""><span id="toggle-menu-icon"></span></label><a class="nav-home" href="/"><img class="nav-logo" src="/img/home/top-logo.svg"/></a><nav id="nav-links"><a href="/learn/">Get Started</a><a href="/tech/">Tech</a><a href="/media/">Media</a><a href="/blog/">Blog</a><a href="https://playground.hkube.org/" target="_blank" rel="noopener noreferrer">Playground</a><a href="https://github.com/kube-HPC" target="_blank" rel="noopener noreferrer">GitHub</a><a href="/spec/" target="_blank">Spec</a></nav><div class="algolia-search-wrapper"><input type="text" id="algolia-search-input" placeholder="Search docs..."/></div></section></header><section class="column"><div class="documentationContent"><div class="inner-content"><h1>Pipeline Execution</h1><div><p>HKube allow special signs in the nodes input that designed to define the pipeline execution flow.</p><ul><li>(@)  - <a href="#reference">Reference</a></li><li>(#)  - <a href="#batch">Batch</a></li><li>(#@) - <a href="#batch-reference">Batch Reference</a></li><li>(*@) - <a href="#wait-any">Wait Any</a></li></ul><h3 id="flow-input">Flow Input<a class="hash-link" href="#flow-input">#</a></h3><p>You can define reusable data for nodes input, this input is an object that called <strong>flowInput</strong>.<br/>Using the @ sign we can easily refer to this object.</p><pre class="prism language-json"><span class="attr-name">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example-flowInput&quot;</span><span class="punctuation">,</span>
<span class="attr-name">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example-node&quot;</span><span class="punctuation">,</span> 
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">42</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">,</span> <span class="string">&quot;@flowInput.files.links&quot;</span><span class="punctuation">,</span> <span class="keyword">null</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="attr-name">&quot;foo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bar&quot;</span><span class="punctuation">}</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span><span class="punctuation">,</span>
<span class="attr-name">&quot;flowInput&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
    <span class="attr-name">&quot;files&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
        <span class="attr-name">&quot;links&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>
            <span class="string">&quot;links-1&quot;</span><span class="punctuation">,</span>
            <span class="string">&quot;links-2&quot;</span><span class="punctuation">,</span>
            <span class="string">&quot;links-3&quot;</span>
        <span class="punctuation">]</span><span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>Now the example algorithm will run with this input:</p><pre class="prism language-json">example-alg<span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">42</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="string">&quot;links-1&quot;</span><span class="punctuation">,</span><span class="string">&quot;links-2&quot;</span><span class="punctuation">,</span><span class="string">&quot;links-3&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="keyword">null</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="attr-name">&quot;foo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bar&quot;</span><span class="punctuation">}</span><span class="punctuation">]</span></pre><p>Or batch</p><pre class="prism language-json"><span class="attr-name">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example-flowInput-batch&quot;</span><span class="punctuation">,</span>
<span class="attr-name">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;example-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">42</span><span class="punctuation">,</span> <span class="boolean">false</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">,</span> <span class="string">&quot;#@flowInput.files.links&quot;</span><span class="punctuation">,</span> <span class="keyword">null</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="attr-name">&quot;foo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bar&quot;</span><span class="punctuation">}</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span><span class="punctuation">,</span>
<span class="attr-name">&quot;flowInput&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
    <span class="attr-name">&quot;files&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
        <span class="attr-name">&quot;links&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>
            <span class="string">&quot;links-1&quot;</span><span class="punctuation">,</span>
            <span class="string">&quot;links-2&quot;</span><span class="punctuation">,</span>
            <span class="string">&quot;links-3&quot;</span>
        <span class="punctuation">]</span><span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>And the algorithm will run three times with this input:</p><pre class="prism language-json">example-alg <span class="number">1</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">42</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="string">&quot;links-1&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="keyword">null</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="attr-name">&quot;foo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bar&quot;</span><span class="punctuation">}</span><span class="punctuation">]</span>
example-alg <span class="number">2</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">42</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="string">&quot;links-2&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="keyword">null</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="attr-name">&quot;foo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bar&quot;</span><span class="punctuation">}</span><span class="punctuation">]</span>
example-alg <span class="number">3</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">42</span><span class="punctuation">,</span> <span class="boolean">true</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="string">&quot;links-3&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="keyword">null</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="attr-name">&quot;foo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bar&quot;</span><span class="punctuation">}</span><span class="punctuation">]</span></pre><h3 id="reference">Reference<a class="hash-link" href="#reference">#</a></h3><p>As we can see in the A -&gt; B -&gt; C pipeline example, by using @ in the input<br/>we can take node output and make it the input of another node.</p><pre class="prism language-json"><span class="attr-name">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;reference&quot;</span><span class="punctuation">,</span>
<span class="attr-name">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">false</span><span class="punctuation">,</span> <span class="string">&quot;OK&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">true</span><span class="punctuation">,</span> <span class="string">&quot;@green&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@yellow&quot;</span><span class="punctuation">,</span> <span class="number">512</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span></pre><p>The DAG of this pipeline will look like:<br/><img src="../../img/execution/wait-any.png" alt="Diagram"/></p><p>The blue circle is the <strong>pipeline driver</strong> which responsible for executing nodes with the right order and the right input.<br/>Each result from any node is always return to the pipeline driver which decide what to do next.  </p><p><strong>Green node</strong> will run first because it does not depend on any other node.<br/>Green node input will be: [false, &quot;OK&quot;].  </p><p><strong>Yellow node</strong> depends on green node, see the &quot;@green&quot; in the input of the yellow node.<br/>So the input of the yellow node will be: [true, <strong>green node output</strong>].<br/>The last node to run will be the red node because it depend on the completion of the yellow node.<br/>The input of the red node will be: [<strong>yellow node output</strong>, 512].  </p><p>The final results of this pipeline will be the output of the red node.<br/>That because the red node is the last node in the pipeline.</p><h3 id="batch">Batch<a class="hash-link" href="#batch">#</a></h3><p>By using # in the input we can execute nodes in parallel and reduce the results into single node.<br/>This example is exactly like the first one, except the # sign in the input of the green node.</p><pre class="prism language-json"><span class="attr-name">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;batch&quot;</span><span class="punctuation">,</span>
<span class="attr-name">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">false</span><span class="punctuation">,</span> <span class="string">&quot;#[1,2,3]&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">true</span><span class="punctuation">,</span> <span class="string">&quot;@green&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@yellow&quot;</span><span class="punctuation">,</span> <span class="number">512</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span></pre><p>The DAG of this pipeline will look like:<br/><img src="../../img/execution/simple-batch.png" alt="Diagram"/></p><p>The green node will run as a batch because of the # sign in the input.<br/>This pipeline will create three different tasks from type green-alg.<br/>each with a different input:  </p><pre class="prism language-json">green-alg <span class="number">1</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">false</span><span class="punctuation">,</span> <span class="string">&quot;1&quot;</span><span class="punctuation">]</span>
green-alg <span class="number">2</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">false</span><span class="punctuation">,</span> <span class="string">&quot;2&quot;</span><span class="punctuation">]</span>
green-alg <span class="number">3</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">false</span><span class="punctuation">,</span> <span class="string">&quot;3&quot;</span><span class="punctuation">]</span></pre><p>The yellow node will wait until all tasks of the green node will finish.<br/>The input of the yellow node will be: [true, green node output].<br/>The input of the red node will be: [yellow node output, 512].</p><h3 id="another-batch-example">Another Batch Example<a class="hash-link" href="#another-batch-example">#</a></h3><pre class="prism language-json"><span class="attr-name">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;batch&quot;</span><span class="punctuation">,</span>
<span class="attr-name">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;#[1,2,3]&quot;</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;#@green&quot;</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;#@yellow&quot;</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span></pre><p>The DAG of this pipeline will look like:<br/><img src="../../img/execution/batch-result2.png" alt="Diagram"/> </p><h3 id="batch-reference">Batch Reference<a class="hash-link" href="#batch-reference">#</a></h3><p>By using #@ in the input we can create a batch processing on node results.<br/>Lets say that green node returns an array: [&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;].</p><pre class="prism language-json"><span class="attr-name">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;batch-reference&quot;</span><span class="punctuation">,</span>
<span class="attr-name">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">false</span><span class="punctuation">,</span> <span class="string">&quot;OK&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">false</span><span class="punctuation">,</span> <span class="string">&quot;#@green&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@yellow&quot;</span><span class="punctuation">,</span> <span class="number">512</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span></pre><p><strong>Node yellow</strong> will run three times, each with a different input.</p><pre class="prism language-json">yellow-alg <span class="number">1</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">false</span><span class="punctuation">,</span> <span class="string">&quot;A&quot;</span><span class="punctuation">]</span>
yellow-alg <span class="number">2</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">false</span><span class="punctuation">,</span> <span class="string">&quot;B&quot;</span><span class="punctuation">]</span>
yellow-alg <span class="number">3</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">false</span><span class="punctuation">,</span> <span class="string">&quot;C&quot;</span><span class="punctuation">]</span></pre><p>The DAG of this pipeline will look like:<br/><img src="../../img/execution/batch-result.png" alt="Diagram"/></p><h3 id="wait-any">Wait Any<a class="hash-link" href="#wait-any">#</a></h3><p>By using *@ in the input we can create a wait any on batch.</p><pre class="prism language-json"><span class="attr-name">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wait-any&quot;</span><span class="punctuation">,</span>
<span class="attr-name">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">10</span><span class="punctuation">,</span> <span class="string">&quot;#[1,2,3]&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">true</span><span class="punctuation">,</span> <span class="string">&quot;*@green&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@yellow&quot;</span><span class="punctuation">,</span> <span class="number">512</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span></pre><p>The green node is defined to run as batch &quot;#[1,2,3]&quot;.</p><pre class="prism language-json">green-alg <span class="number">1</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">10</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">]</span> -&gt; <span class="number">11</span>
green-alg <span class="number">2</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">10</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">]</span> -&gt; <span class="number">12</span>
green-alg <span class="number">3</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">10</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">]</span> -&gt; <span class="number">13</span></pre><p>The first argument is 10 and the second is one number from the batch array.<br/>For each run it&#x27;s return the sum of these two numbers.</p><p>Now what if we don&#x27;t want that <strong>Node yellow</strong> will wait until all the batch processing is done?<br/>We can define in the node input to wait for any result of green, like this: &quot;<em>@green&quot;.<br/>This way <strong>Node yellow</strong> will run three times, each with different input from <em>*Node green</em></em> output.</p><pre class="prism language-json">yellow-alg <span class="number">1</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">true</span><span class="punctuation">,</span> <span class="number">11</span><span class="punctuation">]</span>
yellow-alg <span class="number">2</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">true</span><span class="punctuation">,</span> <span class="number">12</span><span class="punctuation">]</span>
yellow-alg <span class="number">3</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="boolean">true</span><span class="punctuation">,</span> <span class="number">13</span><span class="punctuation">]</span></pre><p>The DAG of this pipeline will look like:<br/><img src="../../img/execution/wait-any.png" alt="Diagram"/>  </p><h3 id="another-wait-any-example">Another Wait Any Example<a class="hash-link" href="#another-wait-any-example">#</a></h3><p>What if we want to run multiple batches, and for each batch item result<br/>We want to run node that will accept results with same order they have been created.</p><pre class="prism language-json"><span class="attr-name">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wait-any&quot;</span><span class="punctuation">,</span>
<span class="attr-name">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;#[1,2,3]&quot;</span><span class="punctuation">,</span> <span class="string">&quot;OK&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yellow-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;#[1,2,3]&quot;</span><span class="punctuation">,</span> <span class="string">&quot;OK&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">{</span>
    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;red-alg&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;*@green&quot;</span><span class="punctuation">,</span> <span class="string">&quot;*@yellow&quot;</span><span class="punctuation">]</span>
<span class="punctuation">}</span><span class="punctuation">]</span></pre><p>In this example the <strong>Node red</strong> will run with the correct tuples.
This is default behavior of the system.</p><pre class="prism language-json">red-alg <span class="number">1</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">]</span>
red-alg <span class="number">2</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">]</span>
red-alg <span class="number">3</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">]</span></pre><p>The DAG of this pipeline will look like:<br/><img src="../../img/execution/double-wait-any.png" alt="Diagram"/> </p><h3 id="output">Output<a class="hash-link" href="#output">#</a></h3><p>A user can define a pipeline&#x27;s custom output structure and content.<br/>This output may contain output from nodes which are not leafs and have child nodes, it may contain a sub set of a pipelines default output.<br/>To define such output a node of kind &quot;output&quot; is added to the pipeline. This node output is equal to its input, what ever is defined in the output node input attribute will be in the algorithm result.  </p><h4 id="limitations">limitations<a class="hash-link" href="#limitations">#</a></h4><ul><li>An output node can not have an empty input attribute.</li><li>An output node can not have other nodes depend on him, it must me the pipelines last node.</li></ul></div><div><a class="read-next" href="/learn/advancedPipeline/"><span class="read-next-continue">Next →</span><span class="read-next-title">Advanced Pipeline Descriptor</span></a></div></div><div class="nav-docs"><div><h3>Learn</h3><ul><li><a style="margin-left:0;" class="active" href="/learn/">HKube 101</a><ul><li><a href="/learn/#features">Features</a></li><li><a href="/learn/#getting-started"> Getting started</a></li><li><a href="/learn/#let-s-talk-about-hkube"> Let&#x27;s talk about HKUBE</a></li><li><a href="/learn/#implementing-the-algorithms"> Implementing the Algorithms</a></li><li><a href="/learn/#step-by-step-cli-example">  Step-by-step CLI Example</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/install/">Install HKube</a><ul><li><a href="/learn/install/#prerequisites">Prerequisites</a></li><li><a href="/learn/install/#minikube-installation"> Minikube Installation</a></li><li><a href="/learn/install/#production-deployment"> Production Deployment</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/api/">API</a><ul><li><a href="/learn/api/#restful">Restful</a></li><li><a href="/learn/api/#cli"> Cli</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/installCLI/">Install HKube CLI</a><ul><li><a href="/learn/installCLI/#overview">Overview</a></li><li><a href="/learn/installCLI/#setup"> Setup</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/algorithms/">Algorithms</a><ul><li><a href="/learn/algorithms/#integration-methods">Integration Methods</a></li><li><a href="/learn/algorithms/#events-communication"> Events &amp; Communication</a></li><li><a href="/learn/algorithms/#implementation"> Implementation</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/streaming/">Streaming</a><ul><li><a href="/learn/streaming/#introduction">Introduction</a></li><li><a href="/learn/streaming/#features"> Features</a></li><li><a href="/learn/streaming/#advanced"> Advanced</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/sidecars/">Sidecars</a><ul><li><a href="/learn/sidecars/#container-configuration">Container Configuration</a></li><li><a href="/learn/sidecars/#volumes-usage"> Volumes Usage</a></li><li><a href="/learn/sidecars/#environment-variables"> Environment Variables</a></li><li><a href="/learn/sidecars/#common-errors"> Common Errors</a></li><li><a href="/learn/sidecars/#multiple-sidecars"> Multiple Sidecars</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/kai/">KAI Integration</a><ul><li><a href="/learn/kai/#configuration">Configuration</a></li><li><a href="/learn/kai/#example"> Example</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/debug/">Debug Algorithm</a><ul><li><a href="/learn/debug/#introduction">Introduction</a></li><li><a href="/learn/debug/#use-cases"> Use Cases</a></li><li><a href="/learn/debug/#how-to"> How To</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/pipelines/">Pipelines</a><ul><li><a href="/learn/pipelines/#raw">Raw</a></li><li><a href="/learn/pipelines/#stored"> Stored</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/nodes/">Nodes</a><ul><li><a href="/learn/nodes/#entry-nodes">Entry Nodes</a></li><li><a href="/learn/nodes/#final-nodes"> Final Nodes</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/input/">Input</a><ul><li><a href="/learn/input/#input-types">Input Types</a></li><li><a href="/learn/input/#input-order"> Input Order</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/options/">Options</a><ul><li><a href="/learn/options/#batch-tolerance">Batch Tolerance</a></li><li><a href="/learn/options/#verbosity-level"> Verbosity Level</a></li><li><a href="/learn/options/#pipeline-concurrency"> Pipeline Concurrency</a></li><li><a href="/learn/options/#ttl"> TTL</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/execution/">Pipeline Execution</a><ul><li><a href="/learn/execution/#flow-input">Flow Input</a></li><li><a href="/learn/execution/#reference"> Reference</a></li><li><a href="/learn/execution/#batch"> Batch</a></li><li><a href="/learn/execution/#batch-reference"> Batch Reference</a></li><li><a href="/learn/execution/#wait-any"> Wait Any</a></li><li><a href="/learn/execution/#output"> Output</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/advancedPipeline/">Advanced Pipeline Descriptor</a><ul><li><a href="/learn/advancedPipeline/#advance-options">Advance Options</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/triggers/">Triggers</a><ul><li><a href="/learn/triggers/#cron">Cron</a></li><li><a href="/learn/triggers/#pipelines"> Pipelines</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/webhooks/">Webhooks</a><ul><li><a href="/learn/webhooks/#progress">Progress</a></li><li><a href="/learn/webhooks/#result"> Result</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/caching/">Caching / Run Node</a><ul><li><a href="/learn/caching/#introduction">Introduction</a></li><li><a href="/learn/caching/#use-cases"> Use Cases</a></li><li><a href="/learn/caching/#how-to-activate-cache"> How to activate cache</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/codeapi/">Code API</a><ul><li><a href="/learn/codeapi/#introduction">Introduction</a></li><li><a href="/learn/codeapi/#python"> Python</a></li><li><a href="/learn/codeapi/#java"> Java</a></li><li><a href="/learn/codeapi/#node-js"> Node.js</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/versions/">Versions</a><ul><li><a href="/learn/versions/#algorithms">Algorithms</a></li><li><a href="/learn/versions/#pipelines"> Pipelines</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/tensorboard/">Tensorboard Integration</a><ul><li><a href="/learn/tensorboard/#introduction">Introduction</a></li><li><a href="/learn/tensorboard/#config"> Config</a></li></ul></li></ul></div></div></div></section><footer><section class="sitemap"><div class="sitemap-group"><h5><a href="/learn/">Learn</a></h5><a href="/learn/">Introduction</a><a href="/learn/pipelines/">Pipeline</a><a href="/learn/nodes/">Nodes</a><a href="/learn/input/">Input</a><a href="/learn/execution/">Execution</a><a href="/learn/webhooks/">Webhooks</a></div><div class="sitemap-group"><h5><a href="/tech/dashboard/">Dashboard</a></h5><a href="/tech/dashboard/#overview">Overview</a><a href="/tech/dashboard/#tables">Tables</a><a href="/tech/dashboard/#operations">Operations</a></div><div class="sitemap-group"><h5><a href="/media/">Media</a></h5><a href="/media/#jane/">Meet Jane</a><a href="/media/#distributed/">Distributed pipeline</a><a href="/media/#hpc/">HPC over Kubernetes</a><a href="/media/#architecture/">Hkube Architecture</a></div><div class="sitemap-group"><h5><a href="/learn/algorithms/">Algorithms</a></h5><a href="/learn/algorithms/">Introduction</a><a href="/learn/algorithms/#api/">API</a><a href="/learn/algorithms/#implement/">Implement</a><a href="/learn/algorithms/#build/">Build</a><a href="/learn/algorithms/#publish/">Publish</a></div></section><section class="copyright">Copyright ©<span><script>document.write(new Date().getFullYear())</script> </span><noscript>2018</noscript>Hkube. MIT</section></footer><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript" src="/vendor/scroller.js"></script><script>
        docsearch({
          appId: 'BQD9PBVIWN',
          apiKey: '1866dee8e47cc3f926114008ed8f7756',
          indexName: 'hkube',
          inputSelector: '#algolia-search-input',
          debug: false
        });
      </script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-118778729-1"></script><script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'UA-118778729-1');
      </script></body></html>