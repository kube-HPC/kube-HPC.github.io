<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><title>Algorithms | Hkube</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta property="og:title" content="Hkube: HPC over Kubernetes."/><meta property="og:description" content="Hkube - HPC over Kubernetes, cloud native open source framework to run distributed pipeline of algorithms"/><meta property="og:type" content="website"/><meta property="og:url" content="http://hkube.org/"/><meta property="og:image" content="/img/home/og_image.png"/><meta property="og:image:type" content="image/png"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@hkube"/><meta name="twitter:title" content="Hkube: HPC over Kubernetes"/><meta name="twitter:description" content="Hkube HPC over Kubernetes"/><meta name="twitter:image" content="/img/home/twitter_image.png"/><link rel="shortcut icon" href="/img/home/favicon.png"/><link rel="home" type="application/rss+xml" href="/blog/rss.xml" title="Hkube Team Blog"/><link rel="stylesheet" href="/style.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rubik:300|Roboto:300"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,400i,600"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/></head><body><header class="nav-header "><section class="nav-section"><input type="checkbox" id="toggle-menu-checkbox" checked=""/><label id="toggle-menu" for="toggle-menu-checkbox" class=""><span id="toggle-menu-icon"></span></label><a class="nav-home" href="/"><img class="nav-logo" src="/img/home/top-logo.svg"/></a><nav id="nav-links"><a href="/learn/">Get Started</a><a href="/tech/">Tech</a><a href="/media/">Media</a><a href="/blog/">Blog</a><a href="https://playground.hkube.org/" target="_blank" rel="noopener noreferrer">Playground</a><a href="https://github.com/kube-HPC" target="_blank" rel="noopener noreferrer">GitHub</a><a href="/spec/" target="_blank">Spec</a></nav><div class="algolia-search-wrapper"><input type="text" id="algolia-search-input" placeholder="Search docs..."/></div></section></header><section class="column"><div class="documentationContent"><div class="inner-content"><h1>Algorithms</h1><div><p>HKube offers two ways to integrate your algorithm:</p><ol><li>No code involved, no WebSocket and no Docker.  </li><li>Involves code writing, work with WebSocket and Docker.</li></ol><p>HKube communicates with algorithms using WebSocket and JSON messages.</p><hr/><h2 id="integration-methods">Integration Methods<a class="hash-link" href="#integration-methods">#</a></h2><p>Integrating an algorithm into HKube involves three main steps:<br/>1) Implement connectivity with HKube using WebSocket.<br/>2) Build the algorithm image and push it to Docker registry.<br/>3) Add the algorithm to HKube.</p><p><strong>We can handle the first two steps for you</strong> – so you don’t have to deal with WebSocket or Docker yourself.</p><p>HKube and your algorithm communicate using WebSocket&#x27;s full-duplex messaging system.<br/>All messages between them are in JSON format.</p><hr/><h3 id="the-easy-way">The Easy Way<a class="hash-link" href="#the-easy-way">#</a></h3><p>If you want a simple, code-free setup, use <code>hkubectl</code> to register an algorithm without handling WebSockets or Docker manually. 
- No code involved.<br/>- No WebSocket.<br/>- No Docker.  </p><p><strong>Steps to Register an Algorithm:</strong>
1. Create an algorithm configuration file (YAML or JSON).
2. Apply the algorithm using <code>hkubectl</code>.</p><p><strong>Example YAML Configuration:</strong></p><pre class="prism language-yaml">name<span class="punctuation">:</span> my<span class="operator">-</span>alg
env<span class="punctuation">:</span> python

resources<span class="punctuation">:</span>
   cpu<span class="punctuation">:</span> <span class="number">0.5</span>
   gpu<span class="punctuation">:</span> <span class="number">1</span>
   mem<span class="punctuation">:</span> 512Mi

code<span class="punctuation">:</span>
   path<span class="punctuation">:</span> <span class="operator">/</span>home<span class="operator">/</span>user<span class="operator">/</span>my<span class="operator">-</span>alg<span class="punctuation">.</span>tar<span class="punctuation">.</span>gz
   entryPoint<span class="punctuation">:</span> main<span class="punctuation">.</span>py</pre><p><strong>Apply Algorithm:</strong>
Run the following command:</p><pre class="prism language-console">hkubectl algorithm apply <span class="operator">--</span>f algorithm<span class="punctuation">.</span>yml</pre><p><strong>Key Parameters:</strong></p><ul><li><code>env</code> - Supported environments: <code>python</code>, <code>nodejs</code>, <code>jvm</code></li><li><code>resources</code> - Define CPU, GPU, and memory allocation.</li><li><code>code.path</code> - Path to the algorithm`s source code.</li><li><code>code.entryPoint</code> - The file containing the <a href="#algorithm-methods">algorithm methods</a>.</li></ul><p><strong>Algorithm Methods:</strong></p><ul><li><strong>Required:</strong> Your algorithm must include a <code>start</code> method.<pre class="prism language-typescript"><span class="operator">&lt;</span>T any<span class="operator">&gt;</span> <span class="function">start</span><span class="punctuation">(</span>Dictionary<span class="operator">&lt;</span>T string<span class="punctuation">,</span> T any<span class="operator">&gt;</span> data<span class="punctuation">)</span></pre></li><li><strong>Optional:</strong> <code>initialize(data)</code>, <code>stop(data)</code><pre class="prism language-typescript"><span class="operator">&lt;</span>T<span class="operator">&gt;</span> <span class="function">initialize</span><span class="punctuation">(</span>Dictionary data<span class="punctuation">)</span>
<span class="operator">&lt;</span>T<span class="operator">&gt;</span> <span class="function">stop</span><span class="punctuation">(</span>Dictionary data<span class="punctuation">)</span></pre></li></ul><p>The <code>data</code> argument contains the following keys:</p><ul><li><code>input</code> Array &lt;Any&gt;</li><li><code>pipelineName</code> &lt;String&gt;</li><li><code>algorithmName</code> &lt;String&gt;</li><li><code>nodeName</code> &lt;String&gt;</li><li><code>jobId</code> &lt;String&gt;</li><li><code>taskId</code> &lt;String&gt;</li><li><code>info</code> &lt;Object&gt;<ul><li><code>extraData</code> &lt;Object&gt;</li><li><code>lastRunResult</code> &lt;Object&gt;</li></ul></li></ul><h4 id="tracking-your-algorithm-s-status">Tracking Your Algorithm’s Status<a class="hash-link" href="#tracking-your-algorithm-s-status">#</a></h4><p>If the response contains a <code>buildId</code>, it means a build was triggered. You can monitor its progress: <a href="http://petstore.swagger.io/?url=https://raw.githubusercontent.com/kube-HPC/hkube/master/core/api-server/api/rest-api/swagger.json#/Webhooks/get_webhooks_status__jobId_" target="_blank" rel="nofollow noopener noreferrer">Build Status</a></p><p>You can do the same using our <a href="http://petstore.swagger.io/?url=https://raw.githubusercontent.com/kube-HPC/hkube/master/core/api-server/api/rest-api/swagger.json#/StoreAlgorithms/post_store_algorithms" target="_blank" rel="nofollow noopener noreferrer">API</a></p><hr/><h3 id="the-long-way">The Long Way<a class="hash-link" href="#the-long-way">#</a></h3><ul><li>Code involves.</li><li>Use WebSocket.</li><li>Use Docker.</li></ul><hr/><h2 id="events-communication">Events &amp; Communication<a class="hash-link" href="#events-communication">#</a></h2><p>This section explains the events exchanged between HKube and your algorithm, and Sub-Pipelines.</p><h3 id="events-from-hkube-to-algorithm">Events From HKube to Algorithm<a class="hash-link" href="#events-from-hkube-to-algorithm">#</a></h3><p>These events are sent from HKube to your algorithm.</p><ul><li><a href="#event-initialize">Initialize</a></li><li><a href="#event-start">Start</a></li><li><a href="#event-stop">Stop</a></li><li><a href="#event-exit">Exit</a></li><li><a href="#event-subpipelinestarted">SubPipelineStarted</a></li><li><a href="#event-subpipelineerror">SubPipelineError</a></li><li><a href="#event-subpipelinedone">SubPipelineDone</a></li><li><a href="#event-subpipelinestopped">SubPipelineStopped</a></li></ul><p><strong>Example Event Format:</strong></p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;string&gt;&quot;</span><span class="punctuation">,</span> // one of the above
   <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;Object&gt;&quot;</span>
<span class="punctuation">}</span></pre><h4 id="event-initialize">Event: initialize<a class="hash-link" href="#event-initialize">#</a></h4><p>This is the first event sent to the algorithm when a task starts.</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;initialize&quot;</span><span class="punctuation">,</span>
   <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
       <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;str&quot;</span><span class="punctuation">,</span> <span class="number">512</span><span class="punctuation">,</span> <span class="boolean">false</span><span class="punctuation">,</span> <span class="punctuation">{</span><span class="attr-name">&quot;foo&quot;</span><span class="punctuation">:</span><span class="string">&quot;bar&quot;</span><span class="punctuation">}</span><span class="punctuation">]</span>
   <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><blockquote><p>data includes an input array, same input as written in the <a href="../input/" target="_blank" rel="nofollow noopener noreferrer">descriptor</a></p></blockquote><h4 id="event-start">Event: start<a class="hash-link" href="#event-start">#</a></h4><p>Invokes the algorithm task.</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;start&quot;</span>
<span class="punctuation">}</span></pre><blockquote><p>This event includes no data</p></blockquote><h4 id="event-stop">Event: stop<a class="hash-link" href="#event-stop">#</a></h4><p>Sends a request to stop the algorithm task.</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stop&quot;</span>
<span class="punctuation">}</span></pre><h4 id="event-exit">Event: exit<a class="hash-link" href="#event-exit">#</a></h4><p>Event invoked before taking the algorithm container down. As best practice, when invoked make the process running the algorithm exit.</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;exit&quot;</span>
<span class="punctuation">}</span></pre><h4 id="event-subpipelinestarted">Event: subPipelineStarted<a class="hash-link" href="#event-subpipelinestarted">#</a></h4><p>Event to inform algorithm that sub pipeline (Raw or Stored) has started</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;subPipelineStarted&quot;</span><span class="punctuation">,</span>
   <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
       <span class="attr-name">&quot;subPipelineId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;alg-subPipeline-internal-id&gt;&quot;</span>
   <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><blockquote><p>The &quot;subPipelineId&quot; property holds the sub pipeline internal Id in algorithm (as given in startRawSubPipeline/startStoredSubPipeline events).</p></blockquote><h4 id="event-subpipelineerror">Event: subPipelineError<a class="hash-link" href="#event-subpipelineerror">#</a></h4><p>Event to inform algorithm that sub pipeline (Raw or Stored) has failed.</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;subPipelineError&quot;</span><span class="punctuation">,</span>
   <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
       <span class="attr-name">&quot;subPipelineId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;alg-subPipeline-internal-id&gt;&quot;</span>
       <span class="attr-name">&quot;error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;error-message&quot;</span>
   <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><ul><li>The &quot;subPipelineId&quot; property holds the sub pipeline internal Id in algorithm (as given in startRawSubPipeline/startStoredSubPipeline events).</li><li>The &quot;error&quot; property holds the error message text from the sub pipeline.</li></ul><h4 id="event-subpipelinedone">Event: subPipelineDone<a class="hash-link" href="#event-subpipelinedone">#</a></h4><p>Event to inform algorithm that sub pipeline (Raw or Stored) has completed successfully.</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;subPipelineDone&quot;</span><span class="punctuation">,</span>
   <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
       <span class="attr-name">&quot;subPipelineId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;alg-subPipeline-internal-id&gt;&quot;</span>
       <span class="attr-name">&quot;response&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;array&quot;</span><span class="punctuation">,</span> <span class="string">&quot;of&quot;</span><span class="punctuation">,</span> <span class="string">&quot;subpipeline&quot;</span><span class="punctuation">,</span> <span class="string">&quot;output&quot;</span><span class="punctuation">,</span> <span class="string">&quot;values&quot;</span><span class="punctuation">]</span>
   <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><ul><li>The &quot;subPipelineId&quot; property holds the sub pipeline internal Id in algorithm (as given in startRawSubPipeline/startStoredSubPipeline events), as the algorithm may start several sub-pipelines.</li><li>The &quot;response&quot; property holds the sub pipeline output array.</li></ul><h4 id="event-subpipelinestopped">Event: subPipelineStopped<a class="hash-link" href="#event-subpipelinestopped">#</a></h4><p>Event to inform algorithm that sub pipeline has stopped</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;subPiplineStopped&quot;</span><span class="punctuation">,</span>
   <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
       <span class="attr-name">&quot;subPipelineId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;alg-subPipeline-internal-id&gt;&quot;</span><span class="punctuation">,</span>
       <span class="attr-name">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;stopping-reason&gt;&quot;</span>
   <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><ul><li>The &quot;subPipelineId&quot; property holds the sub pipeline internal Id in algorithm (as given in startRawSubPipeline/startStoredSubPipeline events).</li><li>The &quot;reason&quot; property holds the reason for stopping the sub pipeline.</li></ul><hr/><h3 id="events-from-algorithm-to-hkube">Events From Algorithm to HKube<a class="hash-link" href="#events-from-algorithm-to-hkube">#</a></h3><p>These events are sent from algorithm to HKube.</p><ul><li><a href="#event-initialized">initialized</a></li><li><a href="#event-started">started</a></li><li><a href="#event-stopped">stopped</a></li><li><a href="#event-done">done</a></li><li><a href="#event-progress">progress</a></li><li><a href="#event-errormessage">errorMessage</a></li></ul><p><strong>Example Event Format:</strong></p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;string&gt;&quot;</span><span class="punctuation">,</span> // one of the above
   <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;Any&gt;&quot;</span><span class="punctuation">,</span>
   <span class="attr-name">&quot;error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;Object&gt;&quot;</span> <span class="punctuation">{</span>
      <span class="attr-name">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;string&gt;&quot;</span><span class="punctuation">,</span>
      <span class="attr-name">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;string&gt;&quot;</span><span class="punctuation">,</span>
      <span class="attr-name">&quot;details&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;string&gt;&quot;</span>
   <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><h4 id="event-initialized">Event: initialized<a class="hash-link" href="#event-initialized">#</a></h4><p>Response event after initialization completes.  </p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;initialized&quot;</span>
<span class="punctuation">}</span></pre><h4 id="event-started">Event: started<a class="hash-link" href="#event-started">#</a></h4><p>Response event after start complete.  </p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;started&quot;</span>
<span class="punctuation">}</span></pre><h4 id="event-stopped">Event: stopped<a class="hash-link" href="#event-stopped">#</a></h4><p>Response event after stop complete.  </p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stopped&quot;</span>
<span class="punctuation">}</span></pre><h4 id="event-done">Event: done<a class="hash-link" href="#event-done">#</a></h4><p>Sent when the algorithm completes its task.</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;done&quot;</span>
<span class="punctuation">}</span></pre><h4 id="event-progress">Event: progress<a class="hash-link" href="#event-progress">#</a></h4><p>If you want to report progress about your algorithm, send this event.</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;progress&quot;</span><span class="punctuation">,</span>
   <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="string">&quot;optional extra details&quot;</span>
<span class="punctuation">}</span></pre><h4 id="event-errormessage">Event: errorMessage<a class="hash-link" href="#event-errormessage">#</a></h4><p>Sent if an error occurs.</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;errorMessage&quot;</span><span class="punctuation">,</span>
   <span class="attr-name">&quot;error&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
      <span class="attr-name">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;YOUR_CODE&gt;&quot;</span><span class="punctuation">,</span>
      <span class="attr-name">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;YOUR_MESSAGE&gt;&quot;</span><span class="punctuation">,</span>
      <span class="attr-name">&quot;details&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;YOUR_DETAILS&gt;&quot;</span>
   <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><hr/><h3 id="sub-pipelines">Sub-Pipelines<a class="hash-link" href="#sub-pipelines">#</a></h3><p>You can trigger and manage sub-pipelines directly from your algorithm.</p><ul><li><a href="#event-startrawsubpipeline">startRawSubPipeline</a></li><li><a href="#event-startstoredsubpipeline">startStoredSubPipeline</a></li><li><a href="#event-stopsubpipeline">stopSubPipeline</a></li><li><a href="#event-startspan">startSpan</a></li><li><a href="#event-finishspan">finishSpan</a></li></ul><h4 id="event-startrawsubpipeline">Event: startRawSubPipeline<a class="hash-link" href="#event-startrawsubpipeline">#</a></h4><p>If you want to start a Raw sub-pipeline from your algorithm, use this event.</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;startRawSubPipeline&quot;</span><span class="punctuation">,</span>
   <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
        <span class="attr-name">&quot;subPipeline&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
            <span class="attr-name">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;sub-pipeline-name&gt;&quot;</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>
                <span class="punctuation">{</span>
                    <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;first-node-name&gt;&quot;</span><span class="punctuation">,</span>
                    <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;alg-name&gt;&quot;</span><span class="punctuation">,</span>
                    <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span>    <span class="punctuation">[</span><span class="string">&quot;@flowInput.data&quot;</span><span class="punctuation">]</span>
                <span class="punctuation">}</span>
            <span class="punctuation">]</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
            <span class="punctuation">}</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;webhooks&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
            <span class="punctuation">}</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;flowInput&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
               <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;array&quot;</span><span class="punctuation">,</span> <span class="string">&quot;of&quot;</span><span class="punctuation">,</span> <span class="string">&quot;subpipeline&quot;</span><span class="punctuation">,</span> <span class="string">&quot;input&quot;</span><span class="punctuation">,</span> <span class="string">&quot;values&quot;</span><span class="punctuation">]</span>
            <span class="punctuation">}</span>
        <span class="punctuation">}</span><span class="punctuation">,</span>
        <span class="attr-name">&quot;subPipelineId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;alg-subPipeline-internal-id&gt;&quot;</span><span class="punctuation">,</span>
   <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><ul><li>The &quot;subPipeline&quot; object gives a standard raw full description of the requested sub pipeline.</li><li>The &quot;input&quot; field value of the first node should be [&quot;@flowInput.data&quot;]</li><li>This input is taken from &quot;flowInput&quot;, where you plant your subpipeline input in the &quot;data&quot; field.</li><li>The &quot;subPipelineId&quot; property holds sub pipeline internal Id in algorithm (as the algorithm may start several sub-pipelines).</li></ul><h4 id="event-startstoredsubpipeline">Event: startStoredSubPipeline<a class="hash-link" href="#event-startstoredsubpipeline">#</a></h4><p>If you want to start a Stored sub-pipeline from your algorithm, use this event.</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;startStoredSubPipeline&quot;</span><span class="punctuation">,</span>
   <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
        <span class="attr-name">&quot;subPipeline&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
            <span class="attr-name">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;stored-sub-pipeline-name&gt;&quot;</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;flowInput&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
               <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;array&quot;</span><span class="punctuation">,</span> <span class="string">&quot;of&quot;</span><span class="punctuation">,</span> <span class="string">&quot;subpipeline&quot;</span><span class="punctuation">,</span> <span class="string">&quot;input&quot;</span><span class="punctuation">,</span> <span class="string">&quot;values&quot;</span><span class="punctuation">]</span>
            <span class="punctuation">}</span>
        <span class="punctuation">}</span><span class="punctuation">,</span>
        <span class="attr-name">&quot;subPipelineId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;alg-subPipeline-internal-id&gt;&quot;</span><span class="punctuation">,</span>
   <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><ul><li>The &quot;subPipeline&quot; object gives a standard stored description of the requested sub pipeline (name and optionally flowInput, options, webhooks).</li><li>This input is taken from &quot;flowInput&quot;, where you plant your subpipeline input in the &quot;data&quot; field.</li><li>The &quot;subPipelineId&quot; property holds sub pipeline internal Id in algorithm (as the algorithm may start several sub-pipelines).</li></ul><h4 id="event-stopsubpipeline">Event: stopSubPipeline<a class="hash-link" href="#event-stopsubpipeline">#</a></h4><p>If you want to stop a sub-pipeline (Raw or Stored) from your algorithm, use this event.</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stopSubPipeline&quot;</span><span class="punctuation">,</span>
   <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
        <span class="attr-name">&quot;subPipelineId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;alg-subPipeline-internal-id&gt;&quot;</span><span class="punctuation">,</span>
        <span class="attr-name">&quot;reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;reason&gt;&quot;</span><span class="punctuation">,</span>
   <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><ul><li>The &quot;subPipelineId&quot; property holds sub pipeline internal Id in algorithm.</li><li>The &quot;reason&quot; property enables to put a textual reason for stopping the subpipeline.</li></ul><h4 id="event-startspan">Event: startspan<a class="hash-link" href="#event-startspan">#</a></h4><p>To start a tracer span, use this event:</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;startSpan&quot;</span><span class="punctuation">,</span>
   <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
      <span class="attr-name">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;span-name&gt;&quot;</span><span class="punctuation">,</span> 
      <span class="attr-name">&quot;tags&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
         <span class="attr-name">&quot;&lt;key1&gt;&quot;</span><span class="punctuation">:</span> &lt;value1&gt;<span class="punctuation">,</span>
         <span class="attr-name">&quot;&lt;key2&gt;&quot;</span><span class="punctuation">:</span> &lt;value2&gt;<span class="punctuation">,</span>
         ...         
      <span class="punctuation">}</span>
   <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><ul><li>The &quot;name&quot; property is the span name, as displayed in the Jaeger.</li><li>The optional &quot;tags&quot; object may include more properties to be added to span&#x27;s tags (in addition to default tags).</li><li>Note: you can nest multiple spans: startSpan 1, startSpan 2, but then need to finish then in reverse order: finishSpan 2, finishSpan 1.</li></ul><h4 id="event-finishspan">Event: finishspan<a class="hash-link" href="#event-finishspan">#</a></h4><p>To finish the last opened tracer span, use this event:</p><pre class="prism language-json"><span class="punctuation">{</span>
   <span class="attr-name">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;finishSpan&quot;</span><span class="punctuation">,</span>
   <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
      <span class="attr-name">&quot;tags&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
         <span class="attr-name">&quot;&lt;key1&gt;&quot;</span><span class="punctuation">:</span> &lt;value1&gt;<span class="punctuation">,</span>
         <span class="attr-name">&quot;&lt;key2&gt;&quot;</span><span class="punctuation">:</span> &lt;value2&gt;<span class="punctuation">,</span>
         ...         
      <span class="punctuation">}</span><span class="punctuation">,</span>
      <span class="attr-name">&quot;error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;error-text&gt;&quot;</span>
   <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><ul><li>The optional &quot;tags&quot; object may include more properties to be added to span&#x27;s tags when finished.</li><li>The optional &quot;error&quot; property is error message (or object with &quot;message&quot; property, e.g. exception).</li><li>Note: in case of algorithm error, remember to send finishSpan to all started spans (in reverse order) before sending errorMessage - <a href="../algorithms/#handle-errors" target="_blank" rel="nofollow noopener noreferrer">Handle Errors</a></li></ul><hr/><h2 id="implementation">Implementation<a class="hash-link" href="#implementation">#</a></h2><p>HKube communicates with your algorithm via WebSocket (native WebSocket or socketio).<br/>This tutorial explains how to create a websocket client that works with HKube.
You can implement the websocket client in any language (PR are welcomed).</p><ul><li><a href="#connect">Connect</a></li><li><a href="#handle-events">Handle Events</a><ul><li><a href="#initialize">Initialize</a></li><li><a href="#start">Start</a></li><li><a href="#stop">Stop</a></li></ul></li><li><a href="#reconnect">Reconnect</a></li><li><a href="#handle-errors">Handle Errors</a></li><li><a href="#send-event">Send Event</a></li></ul><h3 id="connect">Connect<a class="hash-link" href="#connect">#</a></h3><p>The first thing your algorithm should do is create a WebSocket client that connects to: <strong>ws://localhost:3000</strong>.</p><div id="r101"><div class="RRT__container" data-reactroot="" data-reactid="1" data-react-checksum="1849354570"><div class="RRT__tabs" data-reactid="2"><div role="tab" class="RRT__tab tab RRT__tab--first RRT__tab--selected" id="tab-0" aria-selected="true" aria-expanded="true" aria-disabled="false" aria-controls="panel-0" tabindex="0" data-reactid="3">js</div><div role="tab" class="RRT__tab tab" id="tab-1" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-1" tabindex="0" data-reactid="4">Java</div><div role="tab" class="RRT__tab tab" id="tab-2" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-2" tabindex="0" data-reactid="5">Python</div><!-- react-empty: 6 --></div><div class="RRT__inkbar-wrapper" data-reactid="7"><div class="RRT__inkbar" style="left:0;width:0;" data-reactid="8"></div></div><div class="RRT__panel panel" role="tabpanel" id="panel-0" aria-labelledby="tab-0" aria-hidden="false" data-reactid="9"><div data-reactid="10"><div data-reactid="11"><pre class="prism language-csharp" data-reactid="12"><!-- react-text: 13 -->
  <!-- /react-text --><span spellcheck="true" class="comment" data-reactid="14">// create ws client and listen to ws://localhost:3000</span><!-- react-text: 15 -->
  <!-- /react-text --><span class="keyword" data-reactid="16">this</span><span class="punctuation" data-reactid="17">.</span><!-- react-text: 18 -->_socket <!-- /react-text --><span class="operator" data-reactid="19">=</span><!-- react-text: 20 --> <!-- /react-text --><span class="keyword" data-reactid="21">new</span><!-- react-text: 22 --> <!-- /react-text --><span class="class-name" data-reactid="23"><!-- react-text: 24 -->WebSocket<!-- /react-text --></span><span class="punctuation" data-reactid="25">(</span><span class="keyword" data-reactid="26">this</span><span class="punctuation" data-reactid="27">.</span><!-- react-text: 28 -->_url<!-- /react-text --><span class="punctuation" data-reactid="29">)</span><span class="punctuation" data-reactid="30">;</span><!-- react-text: 31 -->
  <!-- /react-text --><span class="keyword" data-reactid="32">this</span><span class="punctuation" data-reactid="33">.</span><!-- react-text: 34 -->_socket<!-- /react-text --><span class="punctuation" data-reactid="35">.</span><span class="function" data-reactid="36">on</span><span class="punctuation" data-reactid="37">(</span><span class="string" data-reactid="38">&#x27;open&#x27;</span><span class="punctuation" data-reactid="39">,</span><!-- react-text: 40 --> <!-- /react-text --><span class="punctuation" data-reactid="41">(</span><span class="punctuation" data-reactid="42">)</span><!-- react-text: 43 --> <!-- /react-text --><span class="operator" data-reactid="44">=</span><span class="operator" data-reactid="45">&gt;</span><!-- react-text: 46 --> <!-- /react-text --><span class="punctuation" data-reactid="47">{</span><!-- react-text: 48 -->
    log<!-- /react-text --><span class="punctuation" data-reactid="49">.</span><span class="function" data-reactid="50">debug</span><span class="punctuation" data-reactid="51">(</span><span class="string" data-reactid="52">&quot;connected&quot;</span><span class="punctuation" data-reactid="53">)</span><span class="punctuation" data-reactid="54">;</span><!-- react-text: 55 -->
  <!-- /react-text --><span class="punctuation" data-reactid="56">}</span><span class="punctuation" data-reactid="57">)</span><span class="punctuation" data-reactid="58">;</span><!-- react-text: 59 -->
  <!-- /react-text --></pre></div><div data-reactid="60"><a href="https://github.com/kube-HPC/algorithm-node-example/blob/aa5f7b38c1df45c29c752e7d6c70ede00169b994/lib/algorithm-ws.js#L23" target="_blank" data-reactid="61">code</a></div></div></div><div style="position:absolute;width:0;height:0;visibility:hidden;display:none;" data-reactid="62"></div></div></div><h3 id="handle-events">Handle Events<a class="hash-link" href="#handle-events">#</a></h3><p>Here we are registering to events from HKube.<br/>Each event has a specific handler, as described below.</p><div id="r102"><div class="RRT__container" data-reactroot="" data-reactid="1" data-react-checksum="1926563492"><div class="RRT__tabs" data-reactid="2"><div role="tab" class="RRT__tab tab RRT__tab--first RRT__tab--selected" id="tab-0" aria-selected="true" aria-expanded="true" aria-disabled="false" aria-controls="panel-0" tabindex="0" data-reactid="3">Js</div><div role="tab" class="RRT__tab tab" id="tab-1" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-1" tabindex="0" data-reactid="4">Java</div><div role="tab" class="RRT__tab tab" id="tab-2" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-2" tabindex="0" data-reactid="5">Python</div><!-- react-empty: 6 --></div><div class="RRT__inkbar-wrapper" data-reactid="7"><div class="RRT__inkbar" style="left:0;width:0;" data-reactid="8"></div></div><div class="RRT__panel panel" role="tabpanel" id="panel-0" aria-labelledby="tab-0" aria-hidden="false" data-reactid="9"><div data-reactid="10"><div data-reactid="11"><pre class="prism language-js" data-reactid="12"><!-- react-text: 13 -->
  <!-- /react-text --><span class="keyword" data-reactid="14">this</span><span class="punctuation" data-reactid="15">.</span><!-- react-text: 16 -->_socket<!-- /react-text --><span class="punctuation" data-reactid="17">.</span><span class="function" data-reactid="18">on</span><span class="punctuation" data-reactid="19">(</span><span class="string" data-reactid="20">&#x27;message&#x27;</span><span class="punctuation" data-reactid="21">,</span><!-- react-text: 22 --> <!-- /react-text --><span class="punctuation" data-reactid="23">(</span><!-- react-text: 24 -->message<!-- /react-text --><span class="punctuation" data-reactid="25">)</span><!-- react-text: 26 --> <!-- /react-text --><span class="operator" data-reactid="27">=</span><span class="operator" data-reactid="28">&gt;</span><!-- react-text: 29 --> <!-- /react-text --><span class="punctuation" data-reactid="30">{</span><!-- react-text: 31 -->
    <!-- /react-text --><span class="keyword" data-reactid="32">const</span><!-- react-text: 33 --> payload <!-- /react-text --><span class="operator" data-reactid="34">=</span><!-- react-text: 35 --> JSON<!-- /react-text --><span class="punctuation" data-reactid="36">.</span><span class="function" data-reactid="37">parse</span><span class="punctuation" data-reactid="38">(</span><!-- react-text: 39 -->message<!-- /react-text --><span class="punctuation" data-reactid="40">)</span><span class="punctuation" data-reactid="41">;</span><!-- react-text: 42 -->
    <!-- /react-text --><span class="keyword" data-reactid="43">switch</span><!-- react-text: 44 --> <!-- /react-text --><span class="punctuation" data-reactid="45">(</span><!-- react-text: 46 -->payload<!-- /react-text --><span class="punctuation" data-reactid="47">.</span><!-- react-text: 48 -->command<!-- /react-text --><span class="punctuation" data-reactid="49">)</span><!-- react-text: 50 --> <!-- /react-text --><span class="punctuation" data-reactid="51">{</span><!-- react-text: 52 -->
      <!-- /react-text --><span class="keyword" data-reactid="53">case</span><!-- react-text: 54 --> messages<!-- /react-text --><span class="punctuation" data-reactid="55">.</span><!-- react-text: 56 -->incoming<!-- /react-text --><span class="punctuation" data-reactid="57">.</span><!-- react-text: 58 -->initialize<!-- /react-text --><span class="punctuation" data-reactid="59">:</span><!-- react-text: 60 -->
        <!-- /react-text --><span class="keyword" data-reactid="61">this</span><span class="punctuation" data-reactid="62">.</span><span class="function" data-reactid="63">_initialize</span><span class="punctuation" data-reactid="64">(</span><!-- react-text: 65 -->payload<!-- /react-text --><span class="punctuation" data-reactid="66">)</span><span class="punctuation" data-reactid="67">;</span><!-- react-text: 68 -->
        <!-- /react-text --><span class="keyword" data-reactid="69">break</span><span class="punctuation" data-reactid="70">;</span><!-- react-text: 71 -->
      <!-- /react-text --><span class="keyword" data-reactid="72">case</span><!-- react-text: 73 --> messages<!-- /react-text --><span class="punctuation" data-reactid="74">.</span><!-- react-text: 75 -->incoming<!-- /react-text --><span class="punctuation" data-reactid="76">.</span><!-- react-text: 77 -->start<!-- /react-text --><span class="punctuation" data-reactid="78">:</span><!-- react-text: 79 -->
        <!-- /react-text --><span class="keyword" data-reactid="80">this</span><span class="punctuation" data-reactid="81">.</span><span class="function" data-reactid="82">_start</span><span class="punctuation" data-reactid="83">(</span><span class="punctuation" data-reactid="84">)</span><span class="punctuation" data-reactid="85">;</span><!-- react-text: 86 -->
        <!-- /react-text --><span class="keyword" data-reactid="87">break</span><span class="punctuation" data-reactid="88">;</span><!-- react-text: 89 -->
      <!-- /react-text --><span class="keyword" data-reactid="90">case</span><!-- react-text: 91 --> messages<!-- /react-text --><span class="punctuation" data-reactid="92">.</span><!-- react-text: 93 -->incoming<!-- /react-text --><span class="punctuation" data-reactid="94">.</span><!-- react-text: 95 -->stop<!-- /react-text --><span class="punctuation" data-reactid="96">:</span><!-- react-text: 97 -->
        <!-- /react-text --><span class="keyword" data-reactid="98">this</span><span class="punctuation" data-reactid="99">.</span><span class="function" data-reactid="100">_stop</span><span class="punctuation" data-reactid="101">(</span><span class="punctuation" data-reactid="102">)</span><span class="punctuation" data-reactid="103">;</span><!-- react-text: 104 -->
        <!-- /react-text --><span class="keyword" data-reactid="105">break</span><span class="punctuation" data-reactid="106">;</span><!-- react-text: 107 -->
      <!-- /react-text --><span class="keyword" data-reactid="108">default</span><span class="punctuation" data-reactid="109">:</span><!-- react-text: 110 -->
        log<!-- /react-text --><span class="punctuation" data-reactid="111">.</span><span class="function" data-reactid="112">debug</span><span class="punctuation" data-reactid="113">(</span><span class="string" data-reactid="114">&quot;unknown message payload.command&quot;</span><span class="punctuation" data-reactid="115">)</span><span class="punctuation" data-reactid="116">;</span><!-- react-text: 117 -->
      <!-- /react-text --><span class="punctuation" data-reactid="118">}</span><!-- react-text: 119 --> 
    <!-- /react-text --><span class="punctuation" data-reactid="120">}</span><span class="punctuation" data-reactid="121">)</span><span class="punctuation" data-reactid="122">;</span><!-- react-text: 123 -->
<!-- /react-text --></pre></div><div data-reactid="124"><a href="https://github.com/kube-HPC/algorithm-node-example/blob/aa5f7b38c1df45c29c752e7d6c70ede00169b994/lib/algorithm-ws.js#L23" target="_blank" data-reactid="125">code</a></div></div></div><div style="position:absolute;width:0;height:0;visibility:hidden;display:none;" data-reactid="126"></div></div></div><h4 id="initialize">Initialize<a class="hash-link" href="#initialize">#</a></h4><p>The initialize event is the first event that HKube sends to your algorithm.<br/>The payload of this event includes the pipeline data and the input for your algorithm.<br/>You need to store the input in a local variable for later use.  </p><blockquote><p>same input as written in the <a href="../input/" target="_blank" rel="nofollow noopener noreferrer">descriptor</a></p></blockquote><div id="r103"><div class="RRT__container" data-reactroot="" data-reactid="1" data-react-checksum="-153012145"><div class="RRT__tabs" data-reactid="2"><div role="tab" class="RRT__tab tab RRT__tab--first RRT__tab--selected" id="tab-0" aria-selected="true" aria-expanded="true" aria-disabled="false" aria-controls="panel-0" tabindex="0" data-reactid="3">Js</div><div role="tab" class="RRT__tab tab" id="tab-1" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-1" tabindex="0" data-reactid="4">Java</div><div role="tab" class="RRT__tab tab" id="tab-2" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-2" tabindex="0" data-reactid="5">Python</div><!-- react-empty: 6 --></div><div class="RRT__inkbar-wrapper" data-reactid="7"><div class="RRT__inkbar" style="left:0;width:0;" data-reactid="8"></div></div><div class="RRT__panel panel" role="tabpanel" id="panel-0" aria-labelledby="tab-0" aria-hidden="false" data-reactid="9"><div data-reactid="10"><div data-reactid="11"><pre class="prism language-js" data-reactid="12"><!-- react-text: 13 -->
  <!-- /react-text --><span class="function" data-reactid="14">_initialize</span><span class="punctuation" data-reactid="15">(</span><!-- react-text: 16 -->payload<!-- /react-text --><span class="punctuation" data-reactid="17">)</span><!-- react-text: 18 --> <!-- /react-text --><span class="punctuation" data-reactid="19">{</span><!-- react-text: 20 -->
    <!-- /react-text --><span class="keyword" data-reactid="21">this</span><span class="punctuation" data-reactid="22">.</span><!-- react-text: 23 -->_input <!-- /react-text --><span class="operator" data-reactid="24">=</span><!-- react-text: 25 --> payload<!-- /react-text --><span class="punctuation" data-reactid="26">.</span><!-- react-text: 27 -->data<!-- /react-text --><span class="punctuation" data-reactid="28">.</span><!-- react-text: 29 -->input<!-- /react-text --><span class="punctuation" data-reactid="30">;</span><!-- react-text: 31 -->  <!-- /react-text --><span spellcheck="true" class="comment" data-reactid="32">// store the input</span><!-- react-text: 33 -->
    <!-- /react-text --><span class="keyword" data-reactid="34">this</span><span class="punctuation" data-reactid="35">.</span><span class="function" data-reactid="36">_send</span><span class="punctuation" data-reactid="37">(</span><!-- react-text: 38 -->messages<!-- /react-text --><span class="punctuation" data-reactid="39">.</span><!-- react-text: 40 -->outgoing<!-- /react-text --><span class="punctuation" data-reactid="41">.</span><!-- react-text: 42 -->initialized<!-- /react-text --><span class="punctuation" data-reactid="43">)</span><span class="punctuation" data-reactid="44">;</span><!-- react-text: 45 -->  <!-- /react-text --><span spellcheck="true" class="comment" data-reactid="46">// send ack event</span><!-- react-text: 47 -->
  <!-- /react-text --><span class="punctuation" data-reactid="48">}</span><!-- react-text: 49 -->
<!-- /react-text --></pre></div><div data-reactid="50"><a href="https://github.com/kube-HPC/algorithm-node-example/blob/aa5f7b38c1df45c29c752e7d6c70ede00169b994/lib/algorithm-ws.js#L23" target="_blank" data-reactid="51">code</a></div></div></div><div style="position:absolute;width:0;height:0;visibility:hidden;display:none;" data-reactid="52"></div></div></div><h4 id="start">Start<a class="hash-link" href="#start">#</a></h4><p>The start event is the second event that HKube sends to your algorithm.<br/>As you can see, at the first step of this handler you need to tell HKube that your algorithm has started.<br/>Then you let the algorithm do it&#x27;s work and finally you send the done event with the algorithm result.</p><div id="r104"><div class="RRT__container" data-reactroot="" data-reactid="1" data-react-checksum="-1155540998"><div class="RRT__tabs" data-reactid="2"><div role="tab" class="RRT__tab tab RRT__tab--first RRT__tab--selected" id="tab-0" aria-selected="true" aria-expanded="true" aria-disabled="false" aria-controls="panel-0" tabindex="0" data-reactid="3">Js</div><div role="tab" class="RRT__tab tab" id="tab-1" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-1" tabindex="0" data-reactid="4">Java</div><div role="tab" class="RRT__tab tab" id="tab-2" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-2" tabindex="0" data-reactid="5">Python</div><!-- react-empty: 6 --></div><div class="RRT__inkbar-wrapper" data-reactid="7"><div class="RRT__inkbar" style="left:0;width:0;" data-reactid="8"></div></div><div class="RRT__panel panel" role="tabpanel" id="panel-0" aria-labelledby="tab-0" aria-hidden="false" data-reactid="9"><div data-reactid="10"><div data-reactid="11"><pre class="prism language-js" data-reactid="12"><!-- react-text: 13 -->
  <!-- /react-text --><span class="function" data-reactid="14">_start</span><span class="punctuation" data-reactid="15">(</span><span class="punctuation" data-reactid="16">)</span><!-- react-text: 17 --> <!-- /react-text --><span class="punctuation" data-reactid="18">{</span><!-- react-text: 19 -->
    <!-- /react-text --><span class="keyword" data-reactid="20">this</span><span class="punctuation" data-reactid="21">.</span><span class="function" data-reactid="22">_send</span><span class="punctuation" data-reactid="23">(</span><!-- react-text: 24 -->messages<!-- /react-text --><span class="punctuation" data-reactid="25">.</span><!-- react-text: 26 -->outgoing<!-- /react-text --><span class="punctuation" data-reactid="27">.</span><!-- react-text: 28 -->started<!-- /react-text --><span class="punctuation" data-reactid="29">)</span><span class="punctuation" data-reactid="30">;</span><!-- react-text: 31 -->   <!-- /react-text --><span spellcheck="true" class="comment" data-reactid="32">// send ack event</span><!-- react-text: 33 -->
    <!-- /react-text --><span class="keyword" data-reactid="34">try</span><!-- react-text: 35 --> <!-- /react-text --><span class="punctuation" data-reactid="36">{</span><!-- react-text: 37 -->
        <!-- /react-text --><span spellcheck="true" class="comment" data-reactid="38">// your code goes here...</span><!-- react-text: 39 -->
        <!-- /react-text --><span class="keyword" data-reactid="40">const</span><!-- react-text: 41 --> output <!-- /react-text --><span class="operator" data-reactid="42">=</span><!-- react-text: 43 --> <!-- /react-text --><span class="keyword" data-reactid="44">await</span><!-- react-text: 45 --> myAlgorithm<!-- /react-text --><span class="punctuation" data-reactid="46">.</span><span class="function" data-reactid="47">process</span><span class="punctuation" data-reactid="48">(</span><span class="keyword" data-reactid="49">this</span><span class="punctuation" data-reactid="50">.</span><!-- react-text: 51 -->_input<!-- /react-text --><span class="punctuation" data-reactid="52">)</span><span class="punctuation" data-reactid="53">;</span><!-- react-text: 54 -->  <!-- /react-text --><span spellcheck="true" class="comment" data-reactid="55">// use the input</span><!-- react-text: 56 -->
        <!-- /react-text --><span spellcheck="true" class="comment" data-reactid="57">// your code goes here...</span><!-- react-text: 58 -->

        <!-- /react-text --><span spellcheck="true" class="comment" data-reactid="59">// send response</span><!-- react-text: 60 -->
        <!-- /react-text --><span class="keyword" data-reactid="61">this</span><span class="punctuation" data-reactid="62">.</span><span class="function" data-reactid="63">_send</span><span class="punctuation" data-reactid="64">(</span><!-- react-text: 65 -->messages<!-- /react-text --><span class="punctuation" data-reactid="66">.</span><!-- react-text: 67 -->outgoing<!-- /react-text --><span class="punctuation" data-reactid="68">.</span><!-- react-text: 69 -->done<!-- /react-text --><span class="punctuation" data-reactid="70">,</span><!-- react-text: 71 --> <!-- /react-text --><span class="punctuation" data-reactid="72">{</span><!-- react-text: 73 -->
            data<!-- /react-text --><span class="punctuation" data-reactid="74">:</span><!-- react-text: 75 --> output
        <!-- /react-text --><span class="punctuation" data-reactid="76">}</span><span class="punctuation" data-reactid="77">)</span><span class="punctuation" data-reactid="78">;</span><!-- react-text: 79 -->
    <!-- /react-text --><span class="punctuation" data-reactid="80">}</span><!-- react-text: 81 -->
    <!-- /react-text --><span class="keyword" data-reactid="82">catch</span><!-- react-text: 83 --> <!-- /react-text --><span class="punctuation" data-reactid="84">(</span><span class="class-name" data-reactid="85"><!-- react-text: 86 -->error<!-- /react-text --></span><span class="punctuation" data-reactid="87">)</span><!-- react-text: 88 --> <!-- /react-text --><span class="punctuation" data-reactid="89">{</span><!-- react-text: 90 -->
        <!-- /react-text --><span class="keyword" data-reactid="91">this</span><span class="punctuation" data-reactid="92">.</span><span class="function" data-reactid="93">_onError</span><span class="punctuation" data-reactid="94">(</span><!-- react-text: 95 -->error<!-- /react-text --><span class="punctuation" data-reactid="96">)</span><span class="punctuation" data-reactid="97">;</span><!-- react-text: 98 --> <!-- /react-text --><span spellcheck="true" class="comment" data-reactid="99">// send error event</span><!-- react-text: 100 -->
    <!-- /react-text --><span class="punctuation" data-reactid="101">}</span><!-- react-text: 102 -->
<!-- /react-text --><span class="punctuation" data-reactid="103">}</span></pre></div><div data-reactid="104"><a href="https://github.com/kube-HPC/algorithm-node-example/blob/aa5f7b38c1df45c29c752e7d6c70ede00169b994/lib/algorithm-ws.js#L23" target="_blank" data-reactid="105">code</a></div></div></div><div style="position:absolute;width:0;height:0;visibility:hidden;display:none;" data-reactid="106"></div></div></div><h4 id="stop">Stop<a class="hash-link" href="#stop">#</a></h4><p>HKube will send this event to your algorithm only if stop request was made by HKube users.</p><div id="r105"><div class="RRT__container" data-reactroot="" data-reactid="1" data-react-checksum="-1164063031"><div class="RRT__tabs" data-reactid="2"><div role="tab" class="RRT__tab tab RRT__tab--first RRT__tab--selected" id="tab-0" aria-selected="true" aria-expanded="true" aria-disabled="false" aria-controls="panel-0" tabindex="0" data-reactid="3">Js</div><div role="tab" class="RRT__tab tab" id="tab-1" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-1" tabindex="0" data-reactid="4">Java</div><div role="tab" class="RRT__tab tab" id="tab-2" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-2" tabindex="0" data-reactid="5">Python</div><!-- react-empty: 6 --></div><div class="RRT__inkbar-wrapper" data-reactid="7"><div class="RRT__inkbar" style="left:0;width:0;" data-reactid="8"></div></div><div class="RRT__panel panel" role="tabpanel" id="panel-0" aria-labelledby="tab-0" aria-hidden="false" data-reactid="9"><div data-reactid="10"><div data-reactid="11"><pre class="prism language-js" data-reactid="12"><!-- react-text: 13 -->
  <!-- /react-text --><span class="function" data-reactid="14">_stop</span><span class="punctuation" data-reactid="15">(</span><span class="punctuation" data-reactid="16">)</span><!-- react-text: 17 --> <!-- /react-text --><span class="punctuation" data-reactid="18">{</span><!-- react-text: 19 -->
    <!-- /react-text --><span spellcheck="true" class="comment" data-reactid="20">// your code goes here...</span><!-- react-text: 21 -->
    <!-- /react-text --><span spellcheck="true" class="comment" data-reactid="22">// e.g. myAlgorithm.stop();</span><!-- react-text: 23 -->
    <!-- /react-text --><span spellcheck="true" class="comment" data-reactid="24">// your code goes here...</span><!-- react-text: 25 -->
    
    <!-- /react-text --><span class="keyword" data-reactid="26">this</span><span class="punctuation" data-reactid="27">.</span><span class="function" data-reactid="28">_send</span><span class="punctuation" data-reactid="29">(</span><!-- react-text: 30 -->messages<!-- /react-text --><span class="punctuation" data-reactid="31">.</span><!-- react-text: 32 -->outgoing<!-- /react-text --><span class="punctuation" data-reactid="33">.</span><!-- react-text: 34 -->stopped<!-- /react-text --><span class="punctuation" data-reactid="35">)</span><span class="punctuation" data-reactid="36">;</span><!-- react-text: 37 -->  <!-- /react-text --><span spellcheck="true" class="comment" data-reactid="38">// send ack event</span><!-- react-text: 39 -->
  <!-- /react-text --><span class="punctuation" data-reactid="40">}</span><!-- react-text: 41 -->
<!-- /react-text --></pre></div><div data-reactid="42"><a href="https://github.com/kube-HPC/algorithm-node-example/blob/aa5f7b38c1df45c29c752e7d6c70ede00169b994/lib/algorithm-ws.js#L23" target="_blank" data-reactid="43">code</a></div></div></div><div style="position:absolute;width:0;height:0;visibility:hidden;display:none;" data-reactid="44"></div></div></div><h3 id="reconnect">Reconnect<a class="hash-link" href="#reconnect">#</a></h3><p>Web Sockets are not auto reconnect, so it&#x27;s important that you will handle connection lose.   </p><div id="r106"><div class="RRT__container" data-reactroot="" data-reactid="1" data-react-checksum="114312837"><div class="RRT__tabs" data-reactid="2"><div role="tab" class="RRT__tab tab RRT__tab--first RRT__tab--selected" id="tab-0" aria-selected="true" aria-expanded="true" aria-disabled="false" aria-controls="panel-0" tabindex="0" data-reactid="3">Js</div><div role="tab" class="RRT__tab tab" id="tab-1" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-1" tabindex="0" data-reactid="4">Java</div><div role="tab" class="RRT__tab tab" id="tab-2" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-2" tabindex="0" data-reactid="5">Python</div><!-- react-empty: 6 --></div><div class="RRT__inkbar-wrapper" data-reactid="7"><div class="RRT__inkbar" style="left:0;width:0;" data-reactid="8"></div></div><div class="RRT__panel panel" role="tabpanel" id="panel-0" aria-labelledby="tab-0" aria-hidden="false" data-reactid="9"><div data-reactid="10"><div data-reactid="11"><pre class="prism language-js" data-reactid="12"><!-- react-text: 13 -->
    <!-- /react-text --><span spellcheck="true" class="comment" data-reactid="14">// connect handler        </span><!-- react-text: 15 -->
    <!-- /react-text --><span class="function" data-reactid="16">_connect</span><span class="punctuation" data-reactid="17">(</span><span class="punctuation" data-reactid="18">)</span><!-- react-text: 19 --> <!-- /react-text --><span class="punctuation" data-reactid="20">{</span><!-- react-text: 21 -->
        <!-- /react-text --><span class="keyword" data-reactid="22">this</span><span class="punctuation" data-reactid="23">.</span><!-- react-text: 24 -->_socket <!-- /react-text --><span class="operator" data-reactid="25">=</span><!-- react-text: 26 --> <!-- /react-text --><span class="keyword" data-reactid="27">new</span><!-- react-text: 28 --> <!-- /react-text --><span class="class-name" data-reactid="29"><!-- react-text: 30 -->WebSocket<!-- /react-text --></span><span class="punctuation" data-reactid="31">(</span><span class="keyword" data-reactid="32">this</span><span class="punctuation" data-reactid="33">.</span><!-- react-text: 34 -->_url<!-- /react-text --><span class="punctuation" data-reactid="35">)</span><span class="punctuation" data-reactid="36">;</span><!-- react-text: 37 -->
        <!-- /react-text --><span class="keyword" data-reactid="38">this</span><span class="punctuation" data-reactid="39">.</span><!-- react-text: 40 -->_socket<!-- /react-text --><span class="punctuation" data-reactid="41">.</span><span class="function" data-reactid="42">on</span><span class="punctuation" data-reactid="43">(</span><span class="string" data-reactid="44">&#x27;close&#x27;</span><span class="punctuation" data-reactid="45">,</span><!-- react-text: 46 --> <!-- /react-text --><span class="punctuation" data-reactid="47">(</span><!-- react-text: 48 -->code<!-- /react-text --><span class="punctuation" data-reactid="49">,</span><!-- react-text: 50 --> reason<!-- /react-text --><span class="punctuation" data-reactid="51">)</span><!-- react-text: 52 --> <!-- /react-text --><span class="operator" data-reactid="53">=</span><span class="operator" data-reactid="54">&gt;</span><!-- react-text: 55 --> <!-- /react-text --><span class="punctuation" data-reactid="56">{</span><!-- react-text: 57 -->
            <!-- /react-text --><span class="keyword" data-reactid="58">switch</span><!-- react-text: 59 --> <!-- /react-text --><span class="punctuation" data-reactid="60">(</span><!-- react-text: 61 -->code<!-- /react-text --><span class="punctuation" data-reactid="62">)</span><!-- react-text: 63 --> <!-- /react-text --><span class="punctuation" data-reactid="64">{</span><!-- react-text: 65 -->
                <!-- /react-text --><span class="keyword" data-reactid="66">case</span><!-- react-text: 67 --> <!-- /react-text --><span class="number" data-reactid="68">1000</span><span class="punctuation" data-reactid="69">:</span><!-- react-text: 70 -->
                    log<!-- /react-text --><span class="punctuation" data-reactid="71">.</span><span class="function" data-reactid="72">debug</span><span class="punctuation" data-reactid="73">(</span><span class="string" data-reactid="74">&quot;socket normal closed&quot;</span><span class="punctuation" data-reactid="75">)</span><span class="punctuation" data-reactid="76">;</span><!-- react-text: 77 -->
                    <!-- /react-text --><span class="keyword" data-reactid="78">break</span><span class="punctuation" data-reactid="79">;</span><!-- react-text: 80 -->
                <!-- /react-text --><span class="keyword" data-reactid="81">default</span><span class="punctuation" data-reactid="82">:</span><!-- react-text: 83 -->
                    <!-- /react-text --><span class="keyword" data-reactid="84">this</span><span class="punctuation" data-reactid="85">.</span><span class="function" data-reactid="86">_reconnect</span><span class="punctuation" data-reactid="87">(</span><span class="punctuation" data-reactid="88">)</span><span class="punctuation" data-reactid="89">;</span><!-- react-text: 90 -->
                    <!-- /react-text --><span class="keyword" data-reactid="91">break</span><span class="punctuation" data-reactid="92">;</span><!-- react-text: 93 -->
            <!-- /react-text --><span class="punctuation" data-reactid="94">}</span><!-- react-text: 95 -->
        <!-- /react-text --><span class="punctuation" data-reactid="96">}</span><span class="punctuation" data-reactid="97">)</span><span class="punctuation" data-reactid="98">;</span><!-- react-text: 99 -->
        <!-- /react-text --><span class="keyword" data-reactid="100">this</span><span class="punctuation" data-reactid="101">.</span><!-- react-text: 102 -->_socket<!-- /react-text --><span class="punctuation" data-reactid="103">.</span><span class="function" data-reactid="104">on</span><span class="punctuation" data-reactid="105">(</span><span class="string" data-reactid="106">&#x27;error&#x27;</span><span class="punctuation" data-reactid="107">,</span><!-- react-text: 108 --> <!-- /react-text --><span class="punctuation" data-reactid="109">(</span><!-- react-text: 110 -->e<!-- /react-text --><span class="punctuation" data-reactid="111">)</span><!-- react-text: 112 --> <!-- /react-text --><span class="operator" data-reactid="113">=</span><span class="operator" data-reactid="114">&gt;</span><!-- react-text: 115 --> <!-- /react-text --><span class="punctuation" data-reactid="116">{</span><!-- react-text: 117 -->
            <!-- /react-text --><span class="keyword" data-reactid="118">switch</span><!-- react-text: 119 --> <!-- /react-text --><span class="punctuation" data-reactid="120">(</span><!-- react-text: 121 -->e<!-- /react-text --><span class="punctuation" data-reactid="122">.</span><!-- react-text: 123 -->code<!-- /react-text --><span class="punctuation" data-reactid="124">)</span><!-- react-text: 125 --> <!-- /react-text --><span class="punctuation" data-reactid="126">{</span><!-- react-text: 127 -->
                <!-- /react-text --><span class="keyword" data-reactid="128">case</span><!-- react-text: 129 --> <!-- /react-text --><span class="string" data-reactid="130">&#x27;ECONNREFUSED&#x27;</span><span class="punctuation" data-reactid="131">:</span><!-- react-text: 132 -->
                    <!-- /react-text --><span class="keyword" data-reactid="133">this</span><span class="punctuation" data-reactid="134">.</span><span class="function" data-reactid="135">_reconnect</span><span class="punctuation" data-reactid="136">(</span><span class="punctuation" data-reactid="137">)</span><span class="punctuation" data-reactid="138">;</span><!-- react-text: 139 -->
                    <!-- /react-text --><span class="keyword" data-reactid="140">break</span><span class="punctuation" data-reactid="141">;</span><!-- react-text: 142 -->
                <!-- /react-text --><span class="keyword" data-reactid="143">default</span><span class="punctuation" data-reactid="144">:</span><!-- react-text: 145 -->
                    log<!-- /react-text --><span class="punctuation" data-reactid="146">.</span><span class="function" data-reactid="147">error</span><span class="punctuation" data-reactid="148">(</span><span class="string" data-reactid="149">&quot;error&quot;</span><span class="punctuation" data-reactid="150">)</span><span class="punctuation" data-reactid="151">;</span><!-- react-text: 152 -->
                    <!-- /react-text --><span class="keyword" data-reactid="153">break</span><span class="punctuation" data-reactid="154">;</span><!-- react-text: 155 -->
            <!-- /react-text --><span class="punctuation" data-reactid="156">}</span><!-- react-text: 157 -->
        <!-- /react-text --><span class="punctuation" data-reactid="158">}</span><span class="punctuation" data-reactid="159">)</span><span class="punctuation" data-reactid="160">;</span><!-- react-text: 161 -->
    <!-- /react-text --><span class="punctuation" data-reactid="162">}</span><!-- react-text: 163 -->
    
    <!-- /react-text --><span spellcheck="true" class="comment" data-reactid="164">// reconnect handler </span><!-- react-text: 165 -->
    <!-- /react-text --><span class="function" data-reactid="166">_reconnect</span><span class="punctuation" data-reactid="167">(</span><span class="punctuation" data-reactid="168">)</span><!-- react-text: 169 --> <!-- /react-text --><span class="punctuation" data-reactid="170">{</span><!-- react-text: 171 -->
      log<!-- /react-text --><span class="punctuation" data-reactid="172">.</span><span class="function" data-reactid="173">debug</span><span class="punctuation" data-reactid="174">(</span><span class="string" data-reactid="175">&quot;socket reconnecting&quot;</span><span class="punctuation" data-reactid="176">)</span><span class="punctuation" data-reactid="177">;</span><!-- react-text: 178 -->
      <!-- /react-text --><span class="keyword" data-reactid="179">this</span><span class="punctuation" data-reactid="180">.</span><!-- react-text: 181 -->_socket<!-- /react-text --><span class="punctuation" data-reactid="182">.</span><span class="function" data-reactid="183">removeAllListeners</span><span class="punctuation" data-reactid="184">(</span><span class="punctuation" data-reactid="185">)</span><span class="punctuation" data-reactid="186">;</span><!-- react-text: 187 -->
      <!-- /react-text --><span class="function" data-reactid="188">setTimeout</span><span class="punctuation" data-reactid="189">(</span><span class="punctuation" data-reactid="190">(</span><span class="punctuation" data-reactid="191">)</span><!-- react-text: 192 --> <!-- /react-text --><span class="operator" data-reactid="193">=</span><span class="operator" data-reactid="194">&gt;</span><!-- react-text: 195 --> <!-- /react-text --><span class="punctuation" data-reactid="196">{</span><!-- react-text: 197 -->
          <!-- /react-text --><span class="keyword" data-reactid="198">this</span><span class="punctuation" data-reactid="199">.</span><span class="function" data-reactid="200">_connect</span><span class="punctuation" data-reactid="201">(</span><span class="punctuation" data-reactid="202">)</span><span class="punctuation" data-reactid="203">;</span><!-- react-text: 204 -->
      <!-- /react-text --><span class="punctuation" data-reactid="205">}</span><span class="punctuation" data-reactid="206">,</span><!-- react-text: 207 --> <!-- /react-text --><span class="keyword" data-reactid="208">this</span><span class="punctuation" data-reactid="209">.</span><!-- react-text: 210 -->_reconnectInterval<!-- /react-text --><span class="punctuation" data-reactid="211">)</span><span class="punctuation" data-reactid="212">;</span><!-- react-text: 213 -->
    <!-- /react-text --><span class="punctuation" data-reactid="214">}</span><!-- react-text: 215 -->
<!-- /react-text --><span class="punctuation" data-reactid="216">}</span></pre></div><div data-reactid="217"><a href="https://github.com/kube-HPC/algorithm-node-example/blob/aa5f7b38c1df45c29c752e7d6c70ede00169b994/lib/algorithm-ws.js#L23" target="_blank" data-reactid="218">code</a></div></div></div><div style="position:absolute;width:0;height:0;visibility:hidden;display:none;" data-reactid="219"></div></div></div><h3 id="handle-errors">Handle Errors<a class="hash-link" href="#handle-errors">#</a></h3><p>It’s recommended to catch and report errors in your algorithm to HKube.  </p><div id="r107"><div class="RRT__container" data-reactroot="" data-reactid="1" data-react-checksum="-1555301461"><div class="RRT__tabs" data-reactid="2"><div role="tab" class="RRT__tab tab RRT__tab--first RRT__tab--selected" id="tab-0" aria-selected="true" aria-expanded="true" aria-disabled="false" aria-controls="panel-0" tabindex="0" data-reactid="3">Js</div><div role="tab" class="RRT__tab tab" id="tab-1" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-1" tabindex="0" data-reactid="4">Java</div><div role="tab" class="RRT__tab tab" id="tab-2" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-2" tabindex="0" data-reactid="5">Python</div><!-- react-empty: 6 --></div><div class="RRT__inkbar-wrapper" data-reactid="7"><div class="RRT__inkbar" style="left:0;width:0;" data-reactid="8"></div></div><div class="RRT__panel panel" role="tabpanel" id="panel-0" aria-labelledby="tab-0" aria-hidden="false" data-reactid="9"><div data-reactid="10"><div data-reactid="11"><pre class="prism language-js" data-reactid="12"><!-- react-text: 13 -->
  <!-- /react-text --><span class="function" data-reactid="14">_onError</span><span class="punctuation" data-reactid="15">(</span><!-- react-text: 16 -->error<!-- /react-text --><span class="punctuation" data-reactid="17">)</span><!-- react-text: 18 --> <!-- /react-text --><span class="punctuation" data-reactid="19">{</span><!-- react-text: 20 -->
    <!-- /react-text --><span class="keyword" data-reactid="21">this</span><span class="punctuation" data-reactid="22">.</span><span class="function" data-reactid="23">_send</span><span class="punctuation" data-reactid="24">(</span><!-- react-text: 25 -->messages<!-- /react-text --><span class="punctuation" data-reactid="26">.</span><!-- react-text: 27 -->outgoing<!-- /react-text --><span class="punctuation" data-reactid="28">.</span><!-- react-text: 29 -->error<!-- /react-text --><span class="punctuation" data-reactid="30">,</span><!-- react-text: 31 --> <!-- /react-text --><span class="punctuation" data-reactid="32">{</span><!-- react-text: 33 -->
      error<!-- /react-text --><span class="punctuation" data-reactid="34">:</span><!-- react-text: 35 --> <!-- /react-text --><span class="punctuation" data-reactid="36">{</span><!-- react-text: 37 -->
        code<!-- /react-text --><span class="punctuation" data-reactid="38">:</span><!-- react-text: 39 --> <!-- /react-text --><span class="string" data-reactid="40">&#x27;Failed&#x27;</span><span class="punctuation" data-reactid="41">,</span><!-- react-text: 42 -->
        message<!-- /react-text --><span class="punctuation" data-reactid="43">:</span><!-- react-text: 44 --> error<!-- /react-text --><span class="punctuation" data-reactid="45">.</span><!-- react-text: 46 -->message <!-- /react-text --><span class="operator" data-reactid="47">||</span><!-- react-text: 48 --> error<!-- /react-text --><span class="punctuation" data-reactid="49">,</span><!-- react-text: 50 -->
        details<!-- /react-text --><span class="punctuation" data-reactid="51">:</span><!-- react-text: 52 --> error<!-- /react-text --><span class="punctuation" data-reactid="53">.</span><!-- react-text: 54 -->stackTrace
      <!-- /react-text --><span class="punctuation" data-reactid="55">}</span><!-- react-text: 56 -->
    <!-- /react-text --><span class="punctuation" data-reactid="57">}</span><span class="punctuation" data-reactid="58">)</span><span class="punctuation" data-reactid="59">;</span><!-- react-text: 60 -->
  <!-- /react-text --><span class="punctuation" data-reactid="61">}</span><!-- react-text: 62 -->
  <!-- /react-text --></pre></div><div data-reactid="63"><a href="https://github.com/kube-HPC/algorithm-node-example/blob/aa5f7b38c1df45c29c752e7d6c70ede00169b994/lib/algorithm-ws.js#L23" target="_blank" data-reactid="64">code</a></div></div></div><div style="position:absolute;width:0;height:0;visibility:hidden;display:none;" data-reactid="65"></div></div></div><h3 id="send-event">Send Event<a class="hash-link" href="#send-event">#</a></h3><p>This is a simple handler for send response back to HKube.</p><div id="r108"><div class="RRT__container" data-reactroot="" data-reactid="1" data-react-checksum="-2116320083"><div class="RRT__tabs" data-reactid="2"><div role="tab" class="RRT__tab tab RRT__tab--first RRT__tab--selected" id="tab-0" aria-selected="true" aria-expanded="true" aria-disabled="false" aria-controls="panel-0" tabindex="0" data-reactid="3">Js</div><div role="tab" class="RRT__tab tab" id="tab-1" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-1" tabindex="0" data-reactid="4">Java</div><div role="tab" class="RRT__tab tab" id="tab-2" aria-selected="false" aria-expanded="false" aria-disabled="false" aria-controls="panel-2" tabindex="0" data-reactid="5">Python</div><!-- react-empty: 6 --></div><div class="RRT__inkbar-wrapper" data-reactid="7"><div class="RRT__inkbar" style="left:0;width:0;" data-reactid="8"></div></div><div class="RRT__panel panel" role="tabpanel" id="panel-0" aria-labelledby="tab-0" aria-hidden="false" data-reactid="9"><div data-reactid="10"><div data-reactid="11"><pre class="prism language-js" data-reactid="12"><!-- react-text: 13 -->
  <!-- /react-text --><span class="function" data-reactid="14">_send</span><span class="punctuation" data-reactid="15">(</span><!-- react-text: 16 -->command<!-- /react-text --><span class="punctuation" data-reactid="17">,</span><!-- react-text: 18 --> data<!-- /react-text --><span class="punctuation" data-reactid="19">,</span><!-- react-text: 20 --> error<!-- /react-text --><span class="punctuation" data-reactid="21">)</span><!-- react-text: 22 --> <!-- /react-text --><span class="punctuation" data-reactid="23">{</span><!-- react-text: 24 -->
    <!-- /react-text --><span class="keyword" data-reactid="25">try</span><!-- react-text: 26 --> <!-- /react-text --><span class="punctuation" data-reactid="27">{</span><!-- react-text: 28 -->
      <!-- /react-text --><span class="keyword" data-reactid="29">this</span><span class="punctuation" data-reactid="30">.</span><!-- react-text: 31 -->_socket<!-- /react-text --><span class="punctuation" data-reactid="32">.</span><span class="function" data-reactid="33">send</span><span class="punctuation" data-reactid="34">(</span><!-- react-text: 35 -->JSON<!-- /react-text --><span class="punctuation" data-reactid="36">.</span><span class="function" data-reactid="37">stringify</span><span class="punctuation" data-reactid="38">(</span><span class="punctuation" data-reactid="39">{</span><!-- react-text: 40 --> command<!-- /react-text --><span class="punctuation" data-reactid="41">,</span><!-- react-text: 42 --> data<!-- /react-text --><span class="punctuation" data-reactid="43">,</span><!-- react-text: 44 --> error <!-- /react-text --><span class="punctuation" data-reactid="45">}</span><span class="punctuation" data-reactid="46">)</span><span class="punctuation" data-reactid="47">)</span><span class="punctuation" data-reactid="48">;</span><!-- react-text: 49 -->
    <!-- /react-text --><span class="punctuation" data-reactid="50">}</span><!-- react-text: 51 -->
    <!-- /react-text --><span class="keyword" data-reactid="52">catch</span><!-- react-text: 53 --> <!-- /react-text --><span class="punctuation" data-reactid="54">(</span><span class="class-name" data-reactid="55"><!-- react-text: 56 -->e<!-- /react-text --></span><span class="punctuation" data-reactid="57">)</span><!-- react-text: 58 --> <!-- /react-text --><span class="punctuation" data-reactid="59">{</span><!-- react-text: 60 -->
        log<!-- /react-text --><span class="punctuation" data-reactid="61">.</span><span class="function" data-reactid="62">error</span><span class="punctuation" data-reactid="63">(</span><!-- react-text: 64 -->e<!-- /react-text --><span class="punctuation" data-reactid="65">)</span><span class="punctuation" data-reactid="66">;</span><!-- react-text: 67 -->
      <!-- /react-text --><span class="punctuation" data-reactid="68">}</span><!-- react-text: 69 -->
  <!-- /react-text --><span class="punctuation" data-reactid="70">}</span><!-- react-text: 71 -->
  <!-- /react-text --></pre></div><div data-reactid="72"><a href="https://github.com/kube-HPC/algorithm-node-example/blob/aa5f7b38c1df45c29c752e7d6c70ede00169b994/lib/algorithm-ws.js#L23" target="_blank" data-reactid="73">code</a></div></div></div><div style="position:absolute;width:0;height:0;visibility:hidden;display:none;" data-reactid="74"></div></div></div><hr/><h3 id="monitoring-metrics">Monitoring Metrics<a class="hash-link" href="#monitoring-metrics">#</a></h3><p>If your algorithm uses TensorFlow, you can generate metrics for visualization in TensorBoard. HKube supports this by allowing you to store TensorBoard-compatible logs, which can later be viewed in a dedicated dashboard.
<strong>How It Works:</strong></p><ol><li><strong>Write Metrics:</strong> In your algorithm code, save TensorBoard metrics to the directory specified by the environment variable <code>ALGO_METRICS_DIR</code>.</li><li><strong>View Metrics:</strong> Upon request, HKube can start a TensorBoard web server to display and compare different algorithm runs.</li></ol><p><strong>Running TensorBoard:</strong>
To launch TensorBoard in HKube, use the &#x27;board&#x27; API in the HKube spec. This will start a web server where you can visualize and analyze the recorded metrics.</p></div><div><a class="read-next" href="/learn/streaming/"><span class="read-next-continue">Next →</span><span class="read-next-title">Streaming</span></a></div></div><div class="nav-docs"><div><h3>Learn</h3><ul><li><a style="margin-left:0;" class="active" href="/learn/debug/">Debug Algorithm</a><ul><li><a href="/learn/debug/#introduction">Introduction</a></li><li><a href="/learn/debug/#use-cases"> Use Cases</a></li><li><a href="/learn/debug/#how-to"> How To</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/pipelines/">Pipelines</a><ul><li><a href="/learn/pipelines/#raw">Raw</a></li><li><a href="/learn/pipelines/#stored"> Stored</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/nodes/">Nodes</a><ul><li><a href="/learn/nodes/#entry-nodes">Entry Nodes</a></li><li><a href="/learn/nodes/#final-nodes"> Final Nodes</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/input/">Input</a><ul><li><a href="/learn/input/#input-types">Input Types</a></li><li><a href="/learn/input/#input-order"> Input Order</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/options/">Options</a><ul><li><a href="/learn/options/#batch-tolerance">Batch Tolerance</a></li><li><a href="/learn/options/#verbosity-level"> Verbosity Level</a></li><li><a href="/learn/options/#pipeline-concurrency"> Pipeline Concurrency</a></li><li><a href="/learn/options/#ttl"> TTL</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/execution/">Pipeline Execution</a><ul><li><a href="/learn/execution/#flow-input">Flow Input</a></li><li><a href="/learn/execution/#reference"> Reference</a></li><li><a href="/learn/execution/#batch"> Batch</a></li><li><a href="/learn/execution/#batch-reference"> Batch Reference</a></li><li><a href="/learn/execution/#wait-any"> Wait Any</a></li><li><a href="/learn/execution/#output"> Output</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/advancedPipeline/">Advanced Pipeline Descriptor</a><ul><li><a href="/learn/advancedPipeline/#advance-options">Advance Options</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/triggers/">Triggers</a><ul><li><a href="/learn/triggers/#cron">Cron</a></li><li><a href="/learn/triggers/#pipelines"> Pipelines</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/webhooks/">Webhooks</a><ul><li><a href="/learn/webhooks/#progress">Progress</a></li><li><a href="/learn/webhooks/#result"> Result</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/caching/">Caching / Run Node</a><ul><li><a href="/learn/caching/#introduction">Introduction</a></li><li><a href="/learn/caching/#use-cases"> Use Cases</a></li><li><a href="/learn/caching/#how-to-activate-cache"> How to activate cache</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/codeapi/">Code API</a><ul><li><a href="/learn/codeapi/#introduction">Introduction</a></li><li><a href="/learn/codeapi/#python"> Python</a></li><li><a href="/learn/codeapi/#java"> Java</a></li><li><a href="/learn/codeapi/#node-js"> Node.js</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/versions/">Versions</a><ul><li><a href="/learn/versions/#algorithms">Algorithms</a></li><li><a href="/learn/versions/#pipelines"> Pipelines</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/tensorboard/">Tensorboard Integration</a><ul><li><a href="/learn/tensorboard/#introduction">Introduction</a></li><li><a href="/learn/tensorboard/#config"> Config</a></li></ul></li></ul></div></div></div></section><footer><section class="sitemap"><div class="sitemap-group"><h5><a href="/learn/">Learn</a></h5><a href="/learn/">Introduction</a><a href="/learn/pipelines/">Pipeline</a><a href="/learn/nodes/">Nodes</a><a href="/learn/input/">Input</a><a href="/learn/execution/">Execution</a><a href="/learn/webhooks/">Webhooks</a></div><div class="sitemap-group"><h5><a href="/tech/dashboard/">Dashboard</a></h5><a href="/tech/dashboard/#overview">Overview</a><a href="/tech/dashboard/#tables">Tables</a><a href="/tech/dashboard/#operations">Operations</a></div><div class="sitemap-group"><h5><a href="/media/">Media</a></h5><a href="/media/#jane/">Meet Jane</a><a href="/media/#distributed/">Distributed pipeline</a><a href="/media/#hpc/">HPC over Kubernetes</a><a href="/media/#architecture/">Hkube Architecture</a></div><div class="sitemap-group"><h5><a href="/learn/algorithms/">Algorithms</a></h5><a href="/learn/algorithms/">Introduction</a><a href="/learn/algorithms/#api/">API</a><a href="/learn/algorithms/#implement/">Implement</a><a href="/learn/algorithms/#build/">Build</a><a href="/learn/algorithms/#publish/">Publish</a></div></section><section class="copyright">Copyright ©<span><script>document.write(new Date().getFullYear())</script> </span><noscript>2018</noscript>Hkube. MIT</section></footer><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript" src="/vendor/scroller.js"></script><script>
        docsearch({
          appId: 'BQD9PBVIWN',
          apiKey: '1866dee8e47cc3f926114008ed8f7756',
          indexName: 'hkube',
          inputSelector: '#algolia-search-input',
          debug: false
        });
      </script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-118778729-1"></script><script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'UA-118778729-1');
      </script><script src="/vendor/react.min.js"></script><script src="/vendor/react-dom.min.js"></script><script src="index.html.c116955302ea0f03e8b2.js"></script></body></html>