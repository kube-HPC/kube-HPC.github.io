<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><title>HKube 101 | Hkube</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta property="og:title" content="Hkube: HPC over Kubernetes."/><meta property="og:description" content="Hkube - HPC over Kubernetes, cloud native open source framework to run distributed pipeline of algorithms"/><meta property="og:type" content="website"/><meta property="og:url" content="http://hkube.org/"/><meta property="og:image" content="/img/home/og_image.png"/><meta property="og:image:type" content="image/png"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@hkube"/><meta name="twitter:title" content="Hkube: HPC over Kubernetes"/><meta name="twitter:description" content="Hkube HPC over Kubernetes"/><meta name="twitter:image" content="/img/home/twitter_image.png"/><link rel="shortcut icon" href="/img/home/favicon.png"/><link rel="home" type="application/rss+xml" href="/blog/rss.xml" title="Hkube Team Blog"/><link rel="stylesheet" href="/style.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rubik:300|Roboto:300"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,400i,600"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/></head><body><header class="nav-header "><section class="nav-section"><input type="checkbox" id="toggle-menu-checkbox" checked=""/><label id="toggle-menu" for="toggle-menu-checkbox" class=""><span id="toggle-menu-icon"></span></label><a class="nav-home" href="/"><img class="nav-logo" src="/img/home/top-logo.svg"/></a><nav id="nav-links"><a href="/learn/">Get Started</a><a href="/tech/">Tech</a><a href="/media/">Media</a><a href="/blog/">Blog</a><a href="https://playground.hkube.org/" target="_blank" rel="noopener noreferrer">Playground</a><a href="https://github.com/kube-HPC" target="_blank" rel="noopener noreferrer">GitHub</a><a href="/spec/" target="_blank">Spec</a></nav><div class="algolia-search-wrapper"><input type="text" id="algolia-search-input" placeholder="Search docs..."/></div></section></header><section class="column"><div class="documentationContent"><div class="inner-content"><h1>HKube 101</h1><div><blockquote><p>HKube is a cloud-native open source framework to run <strong><a href="https://en.wikipedia.org/wiki/Distributed_computing" target="_blank" rel="nofollow noopener noreferrer">distributed</a> pipeline of algorithms</strong> built on <a href="https://kubernetes.io/" target="_blank" rel="nofollow noopener noreferrer">Kubernetes</a>.</p><p>HKube optimally <strong>utilizing</strong> pipeline&#x27;s resources, based on <strong>user priorities</strong> and <strong><a href="https://en.wikipedia.org/wiki/Heuristic" target="_blank" rel="nofollow noopener noreferrer">heuristics</a></strong>.</p></blockquote><h2 id="features">Features<a class="hash-link" href="#features">#</a></h2><ul><li><p><strong>Distributed pipeline of algorithms</strong></p><ul><li>Receives <a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_blank" rel="nofollow noopener noreferrer">DAG graph</a> as input and automatically parallelizes your algorithms over the cluster.</li><li>Manages the complications of distributed processing, keep your code simple (even single threaded).</li></ul></li><li><p><strong>Language Agnostic</strong> - As a container based framework designed to facilitate the use of any language for your algorithm.</p></li><li><p><strong>Batch Algorithms</strong> - Run algorithms as a batch - instances of the same algorithm in order to accelerate the running time.</p></li><li><p><strong>Optimize Hardware Utilization</strong></p><ul><li>Containers <strong>automatically</strong> placed based on their resource requirements and other constraints, while not sacrificing availability.</li><li>Mixes critical and best-effort workloads in order to <strong>drive up utilization</strong> and save resources.</li><li><strong>Efficient execution</strong> and clustering by heuristics which uses pipeline and algorithm metrics with combination of user requirements.</li></ul></li><li><p><strong>Build API</strong> - Just upload your code, you <strong>don&#x27;t have to worry</strong> about building containers and integrating them with HKube API.</p></li></ul><h2 id="getting-started">Getting started<a class="hash-link" href="#getting-started">#</a></h2><ul><li>HKube has UI, <a href="../learn/api/#Cli" target="_blank" rel="nofollow noopener noreferrer">CLI</a> and <a href="../learn/api/#restful-api" target="_blank" rel="nofollow noopener noreferrer">RESTFUL-API</a>.</li><li><p><strong>Prerequisite</strong> - See <a href="../learn/install/" target="_blank" rel="nofollow noopener noreferrer">Install</a> for both <strong>local</strong> and <strong>production</strong> environments</p></li><li><p><strong>Creating your first Algorithm</strong></p><ul><li>Currently, we support Javascript, Python and Java <strong>autobuild</strong>.</li><li>Your algorithm gets it&#x27;s inputs from HKube the following way:</li></ul><blockquote><p>Java example - see <a href="https://raw.githubusercontent.com/kube-HPC/java-wrapper.hkube/master/algorithm-example/src/main/resources/instructions.txt" target="_blank" rel="nofollow noopener noreferrer">Documentation</a></p><p>Python example</p></blockquote><pre class="prism language-Python">  def <span class="function">start</span><span class="punctuation">(</span>args<span class="punctuation">)</span><span class="punctuation">:</span>
      <span class="function">print</span><span class="punctuation">(</span><span class="string">&#x27;algorithm: range start&#x27;</span><span class="punctuation">)</span>
      input <span class="operator">=</span> args<span class="punctuation">[</span><span class="string">&#x27;input&#x27;</span><span class="punctuation">]</span><span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span>
      array <span class="operator">=</span> <span class="function">list</span><span class="punctuation">(</span><span class="function">range</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> input <span class="operator">+</span> <span class="number">1</span><span class="punctuation">)</span><span class="punctuation">)</span>
      <span class="function">print</span><span class="punctuation">(</span><span class="string">&quot;Array is: &quot;</span><span class="punctuation">,</span> array<span class="punctuation">)</span>
      <span class="keyword">return</span> array</pre><blockquote><p>Javascript example</p></blockquote><pre class="prism language-Javascript">  module<span class="punctuation">.</span>exports<span class="punctuation">.</span>start <span class="operator">=</span> args <span class="operator">=</span><span class="operator">&gt;</span> <span class="punctuation">{</span>
      console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">&#x27;algorithm: reduce start&#x27;</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="keyword">const</span> input <span class="operator">=</span> args<span class="punctuation">.</span>input<span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span><span class="punctuation">;</span>
      <span class="keyword">return</span> input<span class="punctuation">.</span><span class="function">reduce</span><span class="punctuation">(</span><span class="punctuation">(</span>acc<span class="punctuation">,</span> cur<span class="punctuation">)</span> <span class="operator">=</span><span class="operator">&gt;</span> acc <span class="operator">+</span> cur<span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span><span class="punctuation">;</span></pre><ul><li><p>There are three ways to deploy your algorithms:
<img src="../img/101/Alg-upload.gif" alt="AlgUpload"/> </p><ul><li>HKube can build your docker automatically via a <strong>Package</strong> or a <strong>Repository</strong> - github/gitlab.</li><li>Via a pre-built docker image - <blockquote><p>In order to add algorithm manually to HKube, you need to wrap your algorithm with HKube. HKube already has a wrappers for <code>python</code>,<code>javaScript</code>, and <code>java</code>.</p></blockquote></li><li>Via a packaged file - You must pack your algorithm using<pre class="prism language-bash">tar <span class="operator">-</span>zcvf MyAlgo<span class="punctuation">.</span>tar<span class="punctuation">.</span>gz <span class="operator">*</span></pre><blockquote><p>To further elaborate, the &quot;Packaged file&quot; option requires a package containing all of the necessary files for the project to work, with your algorithms name serving as the &quot;Entry point&quot; in the wizard.
You may package all of your algorithms in one package, and choose different algorithm files as different &quot;Entry Points&quot;, or choose to package each algorithm separately.
<img src="../img/101/Algo_Package.png" alt="AlgPackage"/></p></blockquote></li></ul></li><li><p>The pipeline is built from algorithms which are containerized with docker :</p></li></ul></li></ul><ul><li><p><strong>Creating a Pipeline</strong></p><ul><li>While being able to run the uploaded algorithms seperately, you may create a pipeline to build your algorithm flow.</li><li>Using the pipeline creation wizard, you may interconnect existing algorithms and modify the input flow between each part.</li></ul><p><img src="../img/101/Pipeline-upload.gif" alt="PipelineWiz"/></p></li><li><p><strong>Running your creations</strong></p><ul><li>Both algorithms and pipelines, produce results and logs that can be viewed in the UI.</li><li>We offer debugging options and various advanced configurations.</li></ul></li></ul><blockquote><p>For  detailed CLI Example, refer to <a href="#step-by-step-cli-example">Step-by-step</a> </p></blockquote><h2 id="let-s-talk-about-hkube">Let&#x27;s talk about HKUBE<a class="hash-link" href="#let-s-talk-about-hkube">#</a></h2><p>Here, we will present a specific example to showcase the abilities of HKube.</p><h3 id="the-problem">The Problem<a class="hash-link" href="#the-problem">#</a></h3><p>We want to solve the next problem with given input and a desired output:</p><ul><li><em>Input:</em> Two numbers <code>N</code>, <code>k</code>.</li><li><em>Desired Output:</em> A number <code>M</code> so: <img src="../img/101/sum.svg" alt="sum"/></li></ul><p>For example: <code>N=5</code>, <code>k=2</code> will result:<img src="../img/101/series.svg" alt="series"/></p><h3 id="solution">Solution<a class="hash-link" href="#solution">#</a></h3><p>We will solve <strong>the problem</strong> by running a distributed pipeline of three algorithms: Range, Multiply and Reduce.</p><h4 id="range-algorithm">Range Algorithm<a class="hash-link" href="#range-algorithm">#</a></h4><p>-Receives a parameter <code>N</code> and returns an array of length N with ascending values </p><p>-In our pipeline, this will serve as the Entry point</p><pre class="prism language-console"> N <span class="operator">=</span> <span class="number">5</span>
 <span class="number">5</span> <span class="operator">-</span><span class="operator">&gt;</span> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span></pre><p><a href="https://github.com/kube-HPC/examples/tree/master/autobuild-examples/range-algo-python" target="_blank" rel="nofollow noopener noreferrer">Range</a> - code example</p><h4 id="multiply-algorithm">Multiply Algorithm<a class="hash-link" href="#multiply-algorithm">#</a></h4><p>-Receives parameter <code>k</code> and value <code>I</code> , and returns their multiplication result.</p><p>-In our pipeline, the value <code>I</code> will be received from <code>Range Algorithm</code> and multiplied by <code>k</code>.</p><p>The <code>Multiply</code> algorithm will be invoked parallelly for each Input received from the previous node (<code>Range</code>).</p><pre class="prism language-console">k <span class="operator">=</span> <span class="number">2</span> <span class="punctuation">,</span> I <span class="operator">=</span> <span class="number">4</span>
<span class="punctuation">(</span><span class="number">4</span><span class="punctuation">)</span> <span class="operator">*</span> <span class="punctuation">(</span><span class="number">2</span><span class="punctuation">)</span> <span class="operator">-</span><span class="operator">&gt;</span> <span class="punctuation">(</span><span class="number">8</span><span class="punctuation">)</span></pre><p><a href="https://github.com/kube-HPC/examples/tree/master/autobuild-examples/mult-algo-python" target="_blank" rel="nofollow noopener noreferrer">Mult</a> - code example</p><h4 id="reduce-algorithm">Reduce Algorithm<a class="hash-link" href="#reduce-algorithm">#</a></h4><p>-The algorithm will return the sum of the received array</p><p>-In our pipeline, the algorithm waits to receive all of the results from the <code>Multiply</code> algorithm.</p><pre class="prism language-console"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">,</span><span class="number">8</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">]</span> <span class="operator">-</span><span class="operator">&gt;</span> <span class="number">30</span></pre><p><a href="https://github.com/kube-HPC/examples/tree/master/autobuild-examples/sum-alg-nodejs" target="_blank" rel="nofollow noopener noreferrer">Sum</a> - code example</p><h2 id="implementing-the-algorithms">Implementing the Algorithms<a class="hash-link" href="#implementing-the-algorithms">#</a></h2><p>We will create the algorithms to solve <a href="#the-problem">the problem</a>, HKube currently support two languages for auto build <em>Python</em> and <em>JavaScript</em>.</p><blockquote><p>Examples of the following algorithms are available <a href="https://github.com/kube-HPC/examples/tree/adding-examples-for-101/autobuild-examples" target="_blank" rel="nofollow noopener noreferrer">here</a>.</p><p>Further elaboration on the various ways to implement the <a href="../learn/algorithms/" target="_blank" rel="nofollow noopener noreferrer">algorithms</a> is present.</p></blockquote><h5 id="range-python">Range (Python)<a class="hash-link" href="#range-python">#</a></h5><pre class="prism language-Python">def <span class="function">start</span><span class="punctuation">(</span>args<span class="punctuation">)</span><span class="punctuation">:</span>
    <span class="function">print</span><span class="punctuation">(</span><span class="string">&#x27;algorithm: range start&#x27;</span><span class="punctuation">)</span>
    input <span class="operator">=</span> args<span class="punctuation">[</span><span class="string">&#x27;input&#x27;</span><span class="punctuation">]</span><span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span>
    array <span class="operator">=</span> <span class="function">list</span><span class="punctuation">(</span><span class="function">range</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> input <span class="operator">+</span> <span class="number">1</span><span class="punctuation">)</span><span class="punctuation">)</span>
    <span class="function">print</span><span class="punctuation">(</span><span class="string">&quot;Array is: &quot;</span><span class="punctuation">,</span> array<span class="punctuation">)</span>
    <span class="keyword">return</span> array</pre><p>The <code>start</code> method calls with the args parameter, the inputs to the algorithm will appear in the <code>input</code> property.</p><p>The <code>input</code> property is an array, so you would like to take the first argument (<code>&quot;input&quot;:[&quot;@flowInput.data&quot;]</code> as you can see we placed <code>data</code> as the first argument)</p><h5 id="multiply-python">Multiply (Python)<a class="hash-link" href="#multiply-python">#</a></h5><pre class="prism language-Python">def <span class="function">start</span><span class="punctuation">(</span>args<span class="punctuation">)</span><span class="punctuation">:</span>
    <span class="function">print</span><span class="punctuation">(</span><span class="string">&#x27;algorithm: multiply start&#x27;</span><span class="punctuation">)</span>
    input <span class="operator">=</span> args<span class="punctuation">[</span><span class="string">&#x27;input&#x27;</span><span class="punctuation">]</span><span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span>
    mul <span class="operator">=</span> args<span class="punctuation">[</span><span class="string">&#x27;input&#x27;</span><span class="punctuation">]</span><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>
    <span class="keyword">return</span> input <span class="operator">*</span> mul</pre><p>We&#x27;ve sent two parameters <code>&quot;input&quot;:[&quot;#@Range&quot;,&quot;@flowInput.mul&quot;]</code>, the first one is the output from <code>Range</code> that sent an array of numbers, but because we used the <strong>batch</strong> sign <strong>(#)</strong> each instance of the multiply algorithm will get one item from the array, the second parameter we passing is the <code>mul</code> parameter from the <code>flowInput</code> object.</p><h5 id="reduce-javascript">Reduce (Javascript)<a class="hash-link" href="#reduce-javascript">#</a></h5><pre class="prism language-javascript">module<span class="punctuation">.</span>exports<span class="punctuation">.</span>start <span class="operator">=</span> args <span class="operator">=</span><span class="operator">&gt;</span> <span class="punctuation">{</span>
    console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">&#x27;algorithm: reduce start&#x27;</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="keyword">const</span> input <span class="operator">=</span> args<span class="punctuation">.</span>input<span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span><span class="punctuation">;</span>
    <span class="keyword">return</span> input<span class="punctuation">.</span><span class="function">reduce</span><span class="punctuation">(</span><span class="punctuation">(</span>acc<span class="punctuation">,</span> cur<span class="punctuation">)</span> <span class="operator">=</span><span class="operator">&gt;</span> acc <span class="operator">+</span> cur<span class="punctuation">)</span><span class="punctuation">;</span>
<span class="punctuation">}</span><span class="punctuation">;</span></pre><p>We&#x27;ve placed <code>[&quot;@Multiply&quot;]</code> in the input parameter, HKube will collect all the data from the multiply algorithm and will send it as an array in the first input parameter.</p><h2 id="step-by-step-cli-example">Step-by-step CLI Example<a class="hash-link" href="#step-by-step-cli-example">#</a></h2><ul><li><strong>CLI Prerequisite</strong> - See <a href="../learn/installCLI/" target="_blank" rel="nofollow noopener noreferrer">CLI-Installation</a></li></ul><h3 id="integrate-algorithms">Integrate Algorithms<a class="hash-link" href="#integrate-algorithms">#</a></h3><p>After we&#x27;ve created the <a href="#implementing-the-algorithms">algorithms</a>, we will integrate them with the CLI.
For the packaged tar files, see <a href="https://github.com/kube-HPC/examples/tree/adding-examples-for-101/autobuild-examples" target="_blank" rel="nofollow noopener noreferrer">Repo</a> tar files for <strong>each</strong> of the algorithms.</p><p>Create a <code>yaml</code> (or <code>JSON</code>) that defines the <strong>algorithm</strong>:</p><pre class="prism language-yaml"># range<span class="punctuation">.</span>yml
name<span class="punctuation">:</span> range
env<span class="punctuation">:</span> python # can be python or javascript
resources<span class="punctuation">:</span>
  cpu<span class="punctuation">:</span> <span class="number">0.5</span>
  gpu<span class="punctuation">:</span> <span class="number">1</span> # <span class="keyword">if</span> not needed just remove it <span class="keyword">from</span> the file
  mem<span class="punctuation">:</span> 512Mi

code<span class="punctuation">:</span>
  path<span class="punctuation">:</span> <span class="operator">/</span>path<span class="operator">-</span>to<span class="operator">-</span>algorithm<span class="operator">/</span>range<span class="punctuation">.</span>tar<span class="punctuation">.</span>gz
  entryPoint<span class="punctuation">:</span> main<span class="punctuation">.</span>py</pre><blockquote><p>All of the needed tar files for this example reside <a href="https://github.com/kube-HPC/examples/tree/master/autobuild-examples/tar-packages" target="_blank" rel="nofollow noopener noreferrer">Here</a></p></blockquote><p>Add it with the CLI:</p><pre class="prism language-console">hkubectl algorithm apply <span class="operator">--</span>f range<span class="punctuation">.</span>yml</pre><blockquote><p>This step must be performed <strong>for each of the algorithms</strong>.</p></blockquote><h3 id="building-a-pipeline">Building a Pipeline<a class="hash-link" href="#building-a-pipeline">#</a></h3><p>The algorithms from the previous step are used to <strong>construct a pipeline</strong> using <strong>HKube</strong>.</p><p><img src="../img/101/pipeline-example-1.png" alt="PipelineExample"/></p><h4 id="pipeline-descriptor">Pipeline Descriptor<a class="hash-link" href="#pipeline-descriptor">#</a></h4><p>The <strong>pipeline descriptor</strong> is a <strong>JSON object</strong> which describes and defines the links between the <strong>nodes</strong> by defining the dependencies between them.</p><pre class="prism language-json"><span class="punctuation">{</span>
    <span class="attr-name">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;numbers&quot;</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;nodes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>
        <span class="punctuation">{</span>
            <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Range&quot;</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;range&quot;</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@flowInput.data&quot;</span><span class="punctuation">]</span>
        <span class="punctuation">}</span><span class="punctuation">,</span>
        <span class="punctuation">{</span>
            <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Multiply&quot;</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;multiply&quot;</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;#@Range&quot;</span><span class="punctuation">,</span> <span class="string">&quot;@flowInput.mul&quot;</span><span class="punctuation">]</span>
        <span class="punctuation">}</span><span class="punctuation">,</span>
        <span class="punctuation">{</span>
            <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Reduce&quot;</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;reduce&quot;</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@Multiply&quot;</span><span class="punctuation">]</span>
        <span class="punctuation">}</span>
    <span class="punctuation">]</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;flowInput&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
        <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span>
        <span class="attr-name">&quot;mul&quot;</span><span class="punctuation">:</span> <span class="number">2</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><blockquote><p>Note the <code>flowInput</code>: <code>data</code> = N = 5, <code>mul</code> = k = 2</p></blockquote><p>For more pipeline descriptor options, see <a href="../learn/advancedPipeline/" target="_blank" rel="nofollow noopener noreferrer">Advanced</a></p><h4 id="node-dependencies-legend">Node dependencies - Legend<a class="hash-link" href="#node-dependencies-legend">#</a></h4><p>HKube allows special <a href="http://hkube.org/learn/execution/#batch" target="_blank" rel="nofollow noopener noreferrer">signs</a> in node <code>input</code> for defining the pipeline execution flow.</p><p>In our case we used:</p><p><strong>(@)</strong>  —  References input parameters for the algorithm.</p><p><strong>(#)</strong>  —  Execute nodes in parallel and reduce the results into single node.</p><p><strong>(#@)</strong> — By combining <code>#</code> and <code>@</code> we can create a batch processing on node results.</p><p><img src="../img/101/pipeline-example-2.png" alt="JSON"/></p><h4 id="json-breakdown">JSON Breakdown<a class="hash-link" href="#json-breakdown">#</a></h4><p>We created a pipeline name <code>numbers</code>.</p><pre class="prism language-json">    <span class="attr-name">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;numbers&quot;</span></pre><p>The pipeline is defined by three nodes.</p><pre class="prism language-json"><span class="attr-name">&quot;nodes&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span>
    <span class="punctuation">{</span>
            <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span><span class="string">&quot;Range&quot;</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span><span class="string">&quot;range&quot;</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;@flowInput.data&quot;</span><span class="punctuation">]</span>
        <span class="punctuation">}</span><span class="punctuation">,</span>
        <span class="punctuation">{</span>
            <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span><span class="string">&quot;Multiply&quot;</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span><span class="string">&quot;multiply&quot;</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;#@Range&quot;</span><span class="punctuation">,</span><span class="string">&quot;@flowInput.mul&quot;</span><span class="punctuation">]</span>
        <span class="punctuation">}</span><span class="punctuation">,</span>
        <span class="punctuation">{</span>
            <span class="attr-name">&quot;nodeName&quot;</span><span class="punctuation">:</span><span class="string">&quot;Reduce&quot;</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;algorithmName&quot;</span><span class="punctuation">:</span><span class="string">&quot;reduce&quot;</span><span class="punctuation">,</span>
            <span class="attr-name">&quot;input&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;@Multiply&quot;</span><span class="punctuation">]</span>
        <span class="punctuation">}</span><span class="punctuation">,</span>
    <span class="punctuation">]</span></pre><p>In HKube, the linkage between the nodes is done by defining the algorithm inputs. <code>Multiply</code> will be run after <code>Range</code> algorithm because of the input dependency between them.</p><p>Keep in mind that HKube will transport the results between the nodes <strong>automatically</strong> for doing it HKube currently support two different types of transportation layers <em>object storage</em> and <em>files system</em>.</p><p><img src="../img/101/pipeline-example-3.png" alt="Group 4 (3)"/></p><p>The <code>flowInput</code> is the place to define the Pipeline inputs:</p><pre class="prism language-json"><span class="attr-name">&quot;flowInput&quot;</span><span class="punctuation">:</span><span class="punctuation">{</span>
    <span class="attr-name">&quot;data&quot;</span><span class="punctuation">:</span><span class="number">5</span><span class="punctuation">,</span>
    <span class="attr-name">&quot;mul&quot;</span><span class="punctuation">:</span><span class="number">2</span>
<span class="punctuation">}</span></pre><p>In our case we used <em>Numeric Type</em> but it can be any <a href="https://json-schema.org/understanding-json-schema/reference/type.html" target="_blank" rel="nofollow noopener noreferrer">JSON type</a> (<code>Object</code>, <code>String</code> etc).</p><h3 id="integrate-pipeline">Integrate Pipeline<a class="hash-link" href="#integrate-pipeline">#</a></h3><p>Create a <code>yaml</code> (or <code>JSON</code>) that defines the <strong>pipeline</strong>:</p><pre class="prism language-yaml"># number<span class="punctuation">.</span>yml
name<span class="punctuation">:</span> numbers
nodes<span class="punctuation">:</span>
  <span class="operator">-</span> nodeName<span class="punctuation">:</span> Range
    algorithmName<span class="punctuation">:</span> range
    input<span class="punctuation">:</span>
      <span class="operator">-</span> <span class="string">&#x27;@flowInput.data&#x27;</span>
  <span class="operator">-</span> nodeName<span class="punctuation">:</span> Multiply
    algorithmName<span class="punctuation">:</span> multiply
    input<span class="punctuation">:</span>
      <span class="operator">-</span> <span class="string">&#x27;#@Range&#x27;</span>
      <span class="operator">-</span> <span class="string">&#x27;@flowInput.mul&#x27;</span>
  <span class="operator">-</span> nodeName<span class="punctuation">:</span> Reduce
    algorithmName<span class="punctuation">:</span> reduce
    input<span class="punctuation">:</span>
      <span class="operator">-</span> <span class="string">&#x27;@Multiply&#x27;</span>
flowInput<span class="punctuation">:</span>
  data<span class="punctuation">:</span> <span class="number">5</span>
  mul<span class="punctuation">:</span> <span class="number">2</span></pre><h4 id="raw-ad-hoc-pipeline-running">Raw - Ad-hoc pipeline running<a class="hash-link" href="#raw-ad-hoc-pipeline-running">#</a></h4><p>In order to run the pipeline as raw-data:</p><pre class="prism language-bash">hkubectl exec raw <span class="operator">--</span>f numbers<span class="punctuation">.</span>yml</pre><h4 id="stored-storing-the-pipeline-descriptor-for-future-runs">Stored - Storing the pipeline descriptor for future runs<a class="hash-link" href="#stored-storing-the-pipeline-descriptor-for-future-runs">#</a></h4><p>First we store the pipeline:</p><pre class="prism language-bash">hkubectl pipeline store <span class="operator">--</span>f numbers<span class="punctuation">.</span>yml</pre><p>Then you can execute it (if <code>flowInput</code> available)</p><pre class="prism language-bash"># flowInput stored
hkubectl exec stored numbers</pre><p>For executing the pipeline with other input, create <code>yaml</code> (or <code>JSON</code>) file with <code>flowInput</code> key:</p><pre class="prism language-yaml"># otherFlowInput<span class="punctuation">.</span>yml
flowInput<span class="punctuation">:</span>
  data<span class="punctuation">:</span> <span class="number">500</span>
  mul<span class="punctuation">:</span> <span class="number">200</span></pre><p>Then you can execute it by the pipeline <code>name</code> property:</p><pre class="prism language-bash"># Executes pipeline <span class="string">&quot;numbers&quot;</span> <span class="keyword">with</span> data<span class="operator">=</span><span class="number">500</span><span class="punctuation">,</span> mul<span class="operator">=</span><span class="number">200</span>
hkubectl exec stored numbers <span class="operator">--</span>f otherFlowInput<span class="punctuation">.</span>yml</pre><h3 id="monitor-pipeline-results">Monitor Pipeline Results<a class="hash-link" href="#monitor-pipeline-results">#</a></h3><p>As a result of executing pipeline, HKube will return a <code>jobId</code>.</p><pre class="prism language-bash"># Job ID returned after execution<span class="punctuation">.</span>
result<span class="punctuation">:</span>
  jobId<span class="punctuation">:</span> numbers<span class="punctuation">:</span>a56c97cb<span class="operator">-</span>5d62<span class="number">-4990</span><span class="operator">-</span>817c<span class="operator">-</span>04a8b0448b7c<span class="punctuation">.</span>numbers</pre><p>This is a unique identifier enables <strong>query</strong> on the <strong>specific pipeline execution</strong>.</p><ul><li><p><strong>Stop</strong> pipeline execution:
<code>hkubectl exec stop &lt;jobId&gt; [reason]</code></p></li><li><p><strong>Track</strong> pipeline status:
<code>hkubectl exec status &lt;jobId&gt;</code></p></li><li><p><strong>Track</strong> pipeline result:
<code>hkubectl exec result &lt;jobId&gt;</code></p></li></ul></div><div><a class="read-next" href="/learn/install/"><span class="read-next-continue">Next →</span><span class="read-next-title">Install HKube</span></a></div></div><div class="nav-docs"><div><h3>Learn</h3><ul><li><a style="margin-left:0;" class="active" href="/learn/">HKube 101</a><ul><li><a href="/learn/#features">Features</a></li><li><a href="/learn/#getting-started"> Getting started</a></li><li><a href="/learn/#let-s-talk-about-hkube"> Let&#x27;s talk about HKUBE</a></li><li><a href="/learn/#implementing-the-algorithms"> Implementing the Algorithms</a></li><li><a href="/learn/#step-by-step-cli-example">  Step-by-step CLI Example</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/install/">Install HKube</a><ul><li><a href="/learn/install/#prerequisites">Prerequisites</a></li><li><a href="/learn/install/#minikube-installation"> Minikube Installation</a></li><li><a href="/learn/install/#production-deployment"> Production Deployment</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/api/">API</a><ul><li><a href="/learn/api/#restful">Restful</a></li><li><a href="/learn/api/#cli"> Cli</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/installCLI/">Install HKube CLI</a><ul><li><a href="/learn/installCLI/#overview">Overview</a></li><li><a href="/learn/installCLI/#setup"> Setup</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/algorithms/">Algorithms</a><ul><li><a href="/learn/algorithms/#integration-methods">Integration Methods</a></li><li><a href="/learn/algorithms/#events-communication"> Events &amp; Communication</a></li><li><a href="/learn/algorithms/#implementation"> Implementation</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/streaming/">Streaming</a><ul><li><a href="/learn/streaming/#introduction">Introduction</a></li><li><a href="/learn/streaming/#features"> Features</a></li><li><a href="/learn/streaming/#advanced"> Advanced</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/sidecars/">Sidecars</a><ul><li><a href="/learn/sidecars/#container-configuration">Container Configuration</a></li><li><a href="/learn/sidecars/#volumes-usage"> Volumes Usage</a></li><li><a href="/learn/sidecars/#environment-variables"> Environment Variables</a></li><li><a href="/learn/sidecars/#common-errors"> Common Errors</a></li><li><a href="/learn/sidecars/#multiple-sidecars"> Multiple Sidecars</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/kai/">KAI Integration</a><ul><li><a href="/learn/kai/#configuration">Configuration</a></li><li><a href="/learn/kai/#example"> Example</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/debug/">Debug Algorithm</a><ul><li><a href="/learn/debug/#introduction">Introduction</a></li><li><a href="/learn/debug/#use-cases"> Use Cases</a></li><li><a href="/learn/debug/#how-to"> How To</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/pipelines/">Pipelines</a><ul><li><a href="/learn/pipelines/#raw">Raw</a></li><li><a href="/learn/pipelines/#stored"> Stored</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/nodes/">Nodes</a><ul><li><a href="/learn/nodes/#entry-nodes">Entry Nodes</a></li><li><a href="/learn/nodes/#final-nodes"> Final Nodes</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/input/">Input</a><ul><li><a href="/learn/input/#input-types">Input Types</a></li><li><a href="/learn/input/#input-order"> Input Order</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/options/">Options</a><ul><li><a href="/learn/options/#batch-tolerance">Batch Tolerance</a></li><li><a href="/learn/options/#verbosity-level"> Verbosity Level</a></li><li><a href="/learn/options/#pipeline-concurrency"> Pipeline Concurrency</a></li><li><a href="/learn/options/#ttl"> TTL</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/execution/">Pipeline Execution</a><ul><li><a href="/learn/execution/#flow-input">Flow Input</a></li><li><a href="/learn/execution/#reference"> Reference</a></li><li><a href="/learn/execution/#batch"> Batch</a></li><li><a href="/learn/execution/#batch-reference"> Batch Reference</a></li><li><a href="/learn/execution/#wait-any"> Wait Any</a></li><li><a href="/learn/execution/#output"> Output</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/advancedPipeline/">Advanced Pipeline Descriptor</a><ul><li><a href="/learn/advancedPipeline/#advance-options">Advance Options</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/triggers/">Triggers</a><ul><li><a href="/learn/triggers/#cron">Cron</a></li><li><a href="/learn/triggers/#pipelines"> Pipelines</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/webhooks/">Webhooks</a><ul><li><a href="/learn/webhooks/#progress">Progress</a></li><li><a href="/learn/webhooks/#result"> Result</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/caching/">Caching / Run Node</a><ul><li><a href="/learn/caching/#introduction">Introduction</a></li><li><a href="/learn/caching/#use-cases"> Use Cases</a></li><li><a href="/learn/caching/#how-to-activate-cache"> How to activate cache</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/codeapi/">Code API</a><ul><li><a href="/learn/codeapi/#introduction">Introduction</a></li><li><a href="/learn/codeapi/#python"> Python</a></li><li><a href="/learn/codeapi/#java"> Java</a></li><li><a href="/learn/codeapi/#node-js"> Node.js</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/versions/">Versions</a><ul><li><a href="/learn/versions/#algorithms">Algorithms</a></li><li><a href="/learn/versions/#pipelines"> Pipelines</a></li></ul></li><li><a style="margin-left:0;" class="active" href="/learn/tensorboard/">Tensorboard Integration</a><ul><li><a href="/learn/tensorboard/#introduction">Introduction</a></li><li><a href="/learn/tensorboard/#config"> Config</a></li></ul></li></ul></div></div></div></section><footer><section class="sitemap"><div class="sitemap-group"><h5><a href="/learn/">Learn</a></h5><a href="/learn/">Introduction</a><a href="/learn/pipelines/">Pipeline</a><a href="/learn/nodes/">Nodes</a><a href="/learn/input/">Input</a><a href="/learn/execution/">Execution</a><a href="/learn/webhooks/">Webhooks</a></div><div class="sitemap-group"><h5><a href="/tech/dashboard/">Dashboard</a></h5><a href="/tech/dashboard/#overview">Overview</a><a href="/tech/dashboard/#tables">Tables</a><a href="/tech/dashboard/#operations">Operations</a></div><div class="sitemap-group"><h5><a href="/media/">Media</a></h5><a href="/media/#jane/">Meet Jane</a><a href="/media/#distributed/">Distributed pipeline</a><a href="/media/#hpc/">HPC over Kubernetes</a><a href="/media/#architecture/">Hkube Architecture</a></div><div class="sitemap-group"><h5><a href="/learn/algorithms/">Algorithms</a></h5><a href="/learn/algorithms/">Introduction</a><a href="/learn/algorithms/#api/">API</a><a href="/learn/algorithms/#implement/">Implement</a><a href="/learn/algorithms/#build/">Build</a><a href="/learn/algorithms/#publish/">Publish</a></div></section><section class="copyright">Copyright ©<span><script>document.write(new Date().getFullYear())</script> </span><noscript>2018</noscript>Hkube. MIT</section></footer><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript" src="/vendor/scroller.js"></script><script>
        docsearch({
          appId: 'BQD9PBVIWN',
          apiKey: '1866dee8e47cc3f926114008ed8f7756',
          indexName: 'hkube',
          inputSelector: '#algolia-search-input',
          debug: false
        });
      </script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-118778729-1"></script><script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'UA-118778729-1');
      </script></body></html>